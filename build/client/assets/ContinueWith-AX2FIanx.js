import{r as Rr,j as M,b as at,c as b}from"./jsx-runtime-CAOzMBF_.js";import{h as xr,i as Ur}from"./index-0MMGlk8n.js";import{y as Or,I as z,J as fe,K as kr,N as Pt,P as Lt,Q as Qe,T as Ar,U as ce,V as te,W as et,X as Er,k as de,Y as Mt,Z as it,$ as Dr,a0 as $r,a1 as Tt,a2 as Fr,a3 as Pr,a4 as Lr,a5 as gt,a6 as mt,E as Mr,a7 as Tr,a8 as jr,a9 as Ir,aa as Hr,ab as Nr,ac as Br,ad as jt,ae as zr,af as Gr,ag as Kr,ah as Vr,c as Wr,F as vt,L as qr}from"./components-H_0g9aqc.js";import{G as Xr}from"./iconBase-bkVIurMu.js";import{e as Jr}from"./index-DunSIuTu.js";import{m as Yr}from"./motion-BBpG_RQM.js";/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var Zr=tn,Qr=rn,en=Object.prototype.toString,oe=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function tn(e,a){if(typeof e!="string")throw new TypeError("argument str must be a string");for(var t={},r=a||{},n=r.decode||nn,i=0;i<e.length;){var o=e.indexOf("=",i);if(o===-1)break;var s=e.indexOf(";",i);if(s===-1)s=e.length;else if(s<o){i=e.lastIndexOf(";",o-1)+1;continue}var c=e.slice(i,o).trim();if(t[c]===void 0){var l=e.slice(o+1,s).trim();l.charCodeAt(0)===34&&(l=l.slice(1,-1)),t[c]=sn(l,n)}i=s+1}return t}function rn(e,a,t){var r=t||{},n=r.encode||an;if(typeof n!="function")throw new TypeError("option encode is invalid");if(!oe.test(e))throw new TypeError("argument name is invalid");var i=n(a);if(i&&!oe.test(i))throw new TypeError("argument val is invalid");var o=e+"="+i;if(r.maxAge!=null){var s=r.maxAge-0;if(isNaN(s)||!isFinite(s))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(s)}if(r.domain){if(!oe.test(r.domain))throw new TypeError("option domain is invalid");o+="; Domain="+r.domain}if(r.path){if(!oe.test(r.path))throw new TypeError("option path is invalid");o+="; Path="+r.path}if(r.expires){var c=r.expires;if(!on(c)||isNaN(c.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+c.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.partitioned&&(o+="; Partitioned"),r.priority){var l=typeof r.priority=="string"?r.priority.toLowerCase():r.priority;switch(l){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){var u=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(u){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return o}function nn(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function an(e){return encodeURIComponent(e)}function on(e){return en.call(e)==="[object Date]"||e instanceof Date}function sn(e,a){try{return a(e)}catch{return e}}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const yt={};function It(e,a){!e&&!yt[a]&&(yt[a]=!0,console.warn(a))}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const un=({sign:e,unsign:a})=>(t,r={})=>{let{secrets:n=[],...i}={path:"/",sameSite:"lax",...r};return pn(t,i.expires),{get name(){return t},get isSigned(){return n.length>0},get expires(){return typeof i.maxAge<"u"?new Date(Date.now()+i.maxAge*1e3):i.expires},async parse(o,s){if(!o)return null;let c=Zr(o,{...i,...s});return t in c?c[t]===""?"":await ln(a,c[t],n):null},async serialize(o,s){return Qr(t,o===""?"":await cn(e,o,n),{...i,...s})}}},ot=e=>e!=null&&typeof e.name=="string"&&typeof e.isSigned=="boolean"&&typeof e.parse=="function"&&typeof e.serialize=="function";async function cn(e,a,t){let r=fn(a);return t.length>0&&(r=await e(r,t[0])),r}async function ln(e,a,t){if(t.length>0){for(let r of t){let n=await e(a,r);if(n!==!1)return _t(n)}return null}return _t(a)}function fn(e){return btoa(hn(encodeURIComponent(JSON.stringify(e))))}function _t(e){try{return JSON.parse(decodeURIComponent(dn(atob(e))))}catch{return{}}}function dn(e){let a=e.toString(),t="",r=0,n,i;for(;r<a.length;)n=a.charAt(r++),/[\w*+\-./@]/.exec(n)?t+=n:(i=n.charCodeAt(0),i<256?t+="%"+wt(i,2):t+="%u"+wt(i,4).toUpperCase());return t}function wt(e,a){let t=e.toString(16);for(;t.length<a;)t="0"+t;return t}function hn(e){let a=e.toString(),t="",r=0,n,i;for(;r<a.length;){if(n=a.charAt(r++),n==="%"){if(a.charAt(r)==="u"){if(i=a.slice(r+1,r+5),/^[\da-f]{4}$/i.exec(i)){t+=String.fromCharCode(parseInt(i,16)),r+=5;continue}}else if(i=a.slice(r,r+2),/^[\da-f]{2}$/i.exec(i)){t+=String.fromCharCode(parseInt(i,16)),r+=2;continue}}t+=n}return t}function pn(e,a){It(!a,`The "${e}" cookie has an "expires" property set. This will cause the expires value to not be updated when the session is committed. Instead, you should set the expires value when serializing the cookie. You can use \`commitSession(session, { expires })\` if using a session storage object, or \`cookie.serialize("value", { expires })\` if you're using the cookie directly.`)}function he(e){const a=unescape(encodeURIComponent(e));return Uint8Array.from(a,(t,r)=>a.charCodeAt(r))}function gn(e){const a=String.fromCharCode.apply(null,e);return decodeURIComponent(escape(a))}function le(...e){const a=new Uint8Array(e.reduce((r,n)=>r+n.length,0));let t=0;for(const r of e)a.set(r,t),t+=r.length;return a}function mn(e,a){if(e.length!==a.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==a[t])return!1;return!0}function bt(e){return e instanceof Uint8Array?a=>e[a]:e}function Te(e,a,t,r,n){const i=bt(e),o=bt(t);for(let s=0;s<n;++s)if(i(a+s)!==o(r+s))return!1;return!0}function vn(e){const a=new Array(256).fill(e.length);if(e.length>1)for(let t=0;t<e.length-1;t++)a[e[t]]=e.length-1-t;return a}const H=Symbol("Match");class st{constructor(a){this._lookbehind=new Uint8Array,typeof a=="string"?this._needle=a=he(a):this._needle=a,this._lastChar=a[a.length-1],this._occ=vn(a)}feed(a){let t=0,r;const n=[];for(;t!==a.length;)[t,...r]=this._feed(a,t),n.push(...r);return n}end(){const a=this._lookbehind;return this._lookbehind=new Uint8Array,a}_feed(a,t){const r=[];let n=-this._lookbehind.length;if(n<0){for(;n<0&&n<=a.length-this._needle.length;){const i=this._charAt(a,n+this._needle.length-1);if(i===this._lastChar&&this._memcmp(a,n,this._needle.length-1))return n>-this._lookbehind.length&&r.push(this._lookbehind.slice(0,this._lookbehind.length+n)),r.push(H),this._lookbehind=new Uint8Array,[n+this._needle.length,...r];n+=this._occ[i]}if(n<0)for(;n<0&&!this._memcmp(a,n,a.length-n);)n++;if(n>=0)r.push(this._lookbehind),this._lookbehind=new Uint8Array;else{const i=this._lookbehind.length+n;return i>0&&(r.push(this._lookbehind.slice(0,i)),this._lookbehind=this._lookbehind.slice(i)),this._lookbehind=Uint8Array.from(new Array(this._lookbehind.length+a.length),(o,s)=>this._charAt(a,s-this._lookbehind.length)),[a.length,...r]}}for(n+=t;n<=a.length-this._needle.length;){const i=a[n+this._needle.length-1];if(i===this._lastChar&&a[n]===this._needle[0]&&Te(this._needle,0,a,n,this._needle.length-1))return n>t&&r.push(a.slice(t,n)),r.push(H),[n+this._needle.length,...r];n+=this._occ[i]}if(n<a.length){for(;n<a.length&&(a[n]!==this._needle[0]||!Te(a,n,this._needle,0,a.length-n));)++n;n<a.length&&(this._lookbehind=a.slice(n))}return n>0&&r.push(a.slice(t,n<a.length?n:a.length)),[a.length,...r]}_charAt(a,t){return t<0?this._lookbehind[this._lookbehind.length+t]:a[t]}_memcmp(a,t,r){return Te(this._charAt.bind(this,a),t,this._needle,0,r)}}class yn{constructor(a,t){this._readableStream=t,this._search=new st(a)}async*[Symbol.asyncIterator](){const a=this._readableStream.getReader();try{for(;;){const r=await a.read();if(r.done)break;yield*this._search.feed(r.value)}const t=this._search.end();t.length&&(yield t)}finally{a.releaseLock()}}}const _n=Function.prototype.apply.bind(le,void 0),Ht=he("--"),ee=he(`\r
`);function wn(e){const a=e.split(";").map(r=>r.trim());if(a.shift()!=="form-data")throw new Error('malformed content-disposition header: missing "form-data" in `'+JSON.stringify(a)+"`");const t={};for(const r of a){const n=r.split("=",2);if(n.length!==2)throw new Error("malformed content-disposition header: key-value pair not found - "+r+" in `"+e+"`");const[i,o]=n;if(o[0]==='"'&&o[o.length-1]==='"')t[i]=o.slice(1,-1).replace(/\\"/g,'"');else if(o[0]!=='"'&&o[o.length-1]!=='"')t[i]=o;else if(o[0]==='"'&&o[o.length-1]!=='"'||o[0]!=='"'&&o[o.length-1]==='"')throw new Error("malformed content-disposition header: mismatched quotations in `"+e+"`")}if(!t.name)throw new Error("malformed content-disposition header: missing field name in `"+e+"`");return t}function bn(e){const a=[];let t=!1,r;for(;typeof(r=e.shift())<"u";){const n=r.indexOf(":");if(n===-1)throw new Error("malformed multipart-form header: missing colon");const i=r.slice(0,n).trim().toLowerCase(),o=r.slice(n+1).trim();switch(i){case"content-disposition":t=!0,a.push(...Object.entries(wn(o)));break;case"content-type":a.push(["contentType",o])}}if(!t)throw new Error("malformed multipart-form header: missing content-disposition");return Object.fromEntries(a)}async function Sn(e,a){let t=!0,r=!1;const n=[[]],i=new st(ee);for(;;){const o=await e.next();if(o.done)throw new Error("malformed multipart-form data: unexpected end of stream");if(t&&o.value!==H&&mn(o.value.slice(0,2),Ht))return[void 0,new Uint8Array];let s;if(o.value!==H)s=o.value;else if(!r)s=a;else throw new Error("malformed multipart-form data: unexpected boundary");if(!s.length)continue;t&&(t=!1);const c=i.feed(s);for(const[l,u]of c.entries()){const f=u===H;if(!(!f&&!u.length)){if(r&&f)return c.push(i.end()),[n.filter(d=>d.length).map(_n).map(gn),le(...c.slice(l+1).map(d=>d===H?ee:d))];(r=f)?n.push([]):n[n.length-1].push(u)}}}}async function*Cn(e,a){const t=le(Ht,he(a)),r=new yn(t,e)[Symbol.asyncIterator]();for(;;){const i=await r.next();if(i.done)return;if(i.value===H)break}const n=new st(ee);for(;;){let l=function(p){const g=[];for(const w of n.feed(p))c&&g.push(ee),(c=w===H)||g.push(w);return le(...g)};const[i,o]=await Sn(r,t);if(!i)return;async function s(){const p=await r.next();if(p.done)throw new Error("malformed multipart-form data: unexpected end of stream");return p}let c=!1,u=!1;async function f(){const p=await s();let g;if(p.value!==H)g=p.value;else if(!c)g=ee;else return u=!0,{value:n.end()};return{value:l(g)}}const d=[{value:l(o)}];for(yield{...bn(i),data:{[Symbol.asyncIterator](){return this},async next(){for(;;){const p=d.shift();if(!p)break;if(p.value.length>0)return p}for(;;){if(u)return{done:u,value:void 0};const p=await f();if(p.value.length>0)return p}}}};!u;)d.push(await f())}}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rn(...e){return async a=>{for(let t of e){let r=await t(a);if(typeof r<"u"&&r!==null)return r}}}async function xn(e,a){let t=e.headers.get("Content-Type")||"",[r,n]=t.split(/\s*;\s*boundary=/);if(!e.body||!n||r!=="multipart/form-data")throw new TypeError("Could not parse content as FormData.");let i=new FormData,o=Cn(e.body,n);for await(let s of o){if(s.done)break;typeof s.filename=="string"&&(s.filename=s.filename.split(/[/\\]/).pop());let c=await a(s);typeof c<"u"&&c!==null&&i.append(s.name,c)}return i}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Un(e){return Object.keys(e).reduce((a,t)=>(a[t]=e[t].module,a),{})}var pe={exports:{}},Y={decodeValues:!0,map:!1,silent:!1};function tt(e){return typeof e=="string"&&!!e.trim()}function rt(e,a){var t=e.split(";").filter(tt),r=t.shift(),n=On(r),i=n.name,o=n.value;a=a?Object.assign({},Y,a):Y;try{o=a.decodeValues?decodeURIComponent(o):o}catch(c){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",c)}var s={name:i,value:o};return t.forEach(function(c){var l=c.split("="),u=l.shift().trimLeft().toLowerCase(),f=l.join("=");u==="expires"?s.expires=new Date(f):u==="max-age"?s.maxAge=parseInt(f,10):u==="secure"?s.secure=!0:u==="httponly"?s.httpOnly=!0:u==="samesite"?s.sameSite=f:s[u]=f}),s}function On(e){var a="",t="",r=e.split("=");return r.length>1?(a=r.shift(),t=r.join("=")):t=e,{name:a,value:t}}function Nt(e,a){if(a=a?Object.assign({},Y,a):Y,!e)return a.map?{}:[];if(e.headers)if(typeof e.headers.getSetCookie=="function")e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var t=e.headers[Object.keys(e.headers).find(function(n){return n.toLowerCase()==="set-cookie"})];!t&&e.headers.cookie&&!a.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=t}if(Array.isArray(e)||(e=[e]),a=a?Object.assign({},Y,a):Y,a.map){var r={};return e.filter(tt).reduce(function(n,i){var o=rt(i,a);return n[o.name]=o,n},r)}else return e.filter(tt).map(function(n){return rt(n,a)})}function kn(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var a=[],t=0,r,n,i,o,s;function c(){for(;t<e.length&&/\s/.test(e.charAt(t));)t+=1;return t<e.length}function l(){return n=e.charAt(t),n!=="="&&n!==";"&&n!==","}for(;t<e.length;){for(r=t,s=!1;c();)if(n=e.charAt(t),n===","){for(i=t,t+=1,c(),o=t;t<e.length&&l();)t+=1;t<e.length&&e.charAt(t)==="="?(s=!0,t=o,a.push(e.substring(r,i)),r=t):t=i+1}else t+=1;(!s||t>=e.length)&&a.push(e.substring(r,e.length))}return a}pe.exports=Nt;pe.exports.parse=Nt;pe.exports.parseString=rt;var An=pe.exports.splitCookiesString=kn;/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function En(e,a){let t=a.errors?a.matches.findIndex(i=>a.errors[i.route.id]):-1,r=t>=0?a.matches.slice(0,t+1):a.matches,n;if(t>=0){let{actionHeaders:i,actionData:o,loaderHeaders:s,loaderData:c}=a;a.matches.slice(t).some(l=>{let u=l.route.id;return i[u]&&(!o||o[u]===void 0)?n=i[u]:s[u]&&c[u]===void 0&&(n=s[u]),n!=null})}return r.reduce((i,o,s)=>{let{id:c}=o.route,l=e.routes[c].module,u=a.loaderHeaders[c]||new Headers,f=a.actionHeaders[c]||new Headers,d=n!=null&&s===r.length-1,p=d&&n!==u&&n!==f;if(l.headers==null){let w=new Headers(i);return p&&W(n,w),W(f,w),W(u,w),w}let g=new Headers(l.headers?typeof l.headers=="function"?l.headers({loaderHeaders:u,parentHeaders:i,actionHeaders:f,errorHeaders:d?n:void 0}):l.headers:void 0);return p&&W(n,g),W(f,g),W(u,g),W(i,g),g},new Headers)}function W(e,a){let t=e.get("Set-Cookie");t&&An(t).forEach(n=>{a.append("Set-Cookie",n)})}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function St(e,a){if(e===!1||e===null||typeof e>"u")throw console.error("The following error is a bug in Remix; please open an issue! https://github.com/remix-run/remix/issues/new"),new Error(a)}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ct(e,a,t){let r=Or(e,a,t);return r?r.map(n=>({params:n.params,pathname:n.pathname,route:n.route})):null}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */async function Dn({loadContext:e,action:a,params:t,request:r,routeId:n,singleFetch:i,response:o}){let s=await a({request:zt(Bt(r)),context:e,params:t,...i?{response:o}:null});if(s===void 0)throw new Error(`You defined an action for route "${n}" but didn't return anything from your \`action\` function. Please return a value or \`null\`.`);return i||z(s)?s:fe(s)}async function $n({loadContext:e,loader:a,params:t,request:r,routeId:n,singleFetch:i,response:o}){let s=await a({request:zt(Bt(r)),context:e,params:t,...i?{response:o}:null});if(s===void 0)throw new Error(`You defined a loader for route "${n}" but didn't return anything from your \`loader\` function. Please return a value or \`null\`.`);return kr(s)?s.init&&Pt(s.init.status||200)?Lt(new Headers(s.init.headers).get("Location"),s.init):s:i||z(s)?s:fe(s)}function Bt(e){let a=new URL(e.url),t=a.searchParams.getAll("index");a.searchParams.delete("index");let r=[];for(let i of t)i&&r.push(i);for(let i of r)a.searchParams.append("index",i);let n={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return n.body&&(n.duplex="half"),new Request(a.href,n)}function zt(e){let a=new URL(e.url);a.searchParams.delete("_data");let t={method:e.method,body:e.body,headers:e.headers,signal:e.signal};return t.body&&(t.duplex="half"),new Request(a.href,t)}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Gt(e){let a={};return Object.values(e).forEach(t=>{let r=t.parentId||"";a[r]||(a[r]=[]),a[r].push(t)}),a}function Kt(e,a="",t=Gt(e)){return(t[a]||[]).map(r=>({...r,children:Kt(e,r.id,t)}))}function Vt(e,a,t="",r=Gt(e)){return(r[t]||[]).map(n=>{let i={hasErrorBoundary:n.id==="root"||n.module.ErrorBoundary!=null,id:n.id,path:n.path,loader:n.module.loader?(o,s)=>$n({request:o.request,params:o.params,loadContext:o.context,loader:n.module.loader,routeId:n.id,singleFetch:a.unstable_singleFetch===!0,response:s==null?void 0:s.response}):void 0,action:n.module.action?(o,s)=>Dn({request:o.request,params:o.params,loadContext:o.context,action:n.module.action,routeId:n.id,singleFetch:a.unstable_singleFetch===!0,response:s==null?void 0:s.response}):void 0,handle:n.module.handle};return n.index?{index:!0,...i}:{caseSensitive:n.caseSensitive,children:Vt(e,a,n.id,r),...i}})}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Fn={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},Pn=/[&><\u2028\u2029]/g;function Ln(e){return e.replace(Pn,a=>Fn[a])}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rt(e){return Ln(JSON.stringify(e))}var Mn={};/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */async function Tn(e,a){if(a??(a=Mn.REMIX_DEV_ORIGIN),!a)throw Error("Dev server origin not set");let t=new URL(a);t.pathname="ping";let r=await fetch(t.href,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({buildHash:e.assets.version})}).catch(n=>{throw console.error(`Could not reach Remix dev server at ${t}`),n});if(!r.ok)throw console.error(`Could not reach Remix dev server at ${t} (${r.status})`),Error(await r.text())}function jn(e){console.log(`[REMIX DEV] ${e.assets.version} ready`)}const Wt="__remix_devServerHooks";function In(e){globalThis[Wt]=e}function xt(){return globalThis[Wt]}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hn(e,a){return`⚠️ REMIX FUTURE CHANGE: Resource routes will no longer be able to return raw JavaScript objects in v3 when Single Fetch becomes the default. You can prepare for this change at your convenience by wrapping the data returned from your \`${e}\` function in the \`${a}\` route with \`json()\`.  For instructions on making this change see https://remix.run/docs/en/v2.9.2/guides/single-fetch#resource-routes`}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ut(e,a){var t,r;let n=Kt(e.routes),i=Vt(e.routes,e.future),o=Nr(a)?a:te.Production,s=Br(i,{basename:e.basename,future:{v7_relativeSplatPath:((t=e.future)===null||t===void 0?void 0:t.v3_relativeSplatPath)===!0,v7_throwAbortReason:((r=e.future)===null||r===void 0?void 0:r.v3_throwAbortReason)===!0}}),c=e.entry.module.handleError||((l,{request:u})=>{o!==te.Test&&!u.signal.aborted&&console.error(de(l)&&l.error?l.error:l)});return{routes:n,dataRoutes:i,serverMode:o,staticHandler:s,errorHandler:c}}const Nn=(e,a)=>{let t,r,n,i,o;return async function(c,l={}){if(t=typeof e=="function"?await e():e,a??(a=t.mode),typeof e=="function"){let v=Ut(t,a);r=v.routes,n=v.serverMode,i=v.staticHandler,o=v.errorHandler}else if(!r||!n||!i||!o){let v=Ut(t,a);r=v.routes,n=v.serverMode,i=v.staticHandler,o=v.errorHandler}let u=new URL(c.url),f=Ct(r,u.pathname,t.basename),d=f&&f.length>0?f[0].params:{},p=v=>{if(a===te.Development){var h,m;(h=xt())===null||h===void 0||(m=h.processRequestError)===null||m===void 0||m.call(h,v)}o(v,{context:l,params:d,request:c})},g;if(u.searchParams.has("_data")){t.future.unstable_singleFetch&&p(new Error("Warning: Single fetch-enabled apps should not be making ?_data requests, this is likely to break in the future"));let v=u.searchParams.get("_data");g=await Bn(n,t,i,v,c,l,p),t.entry.module.handleDataRequest&&(g=await t.entry.module.handleDataRequest(g,{context:l,params:d,request:c}),Qe(g)&&(g=Jt(g,t.basename)))}else if(t.future.unstable_singleFetch&&u.pathname.endsWith(".data")){let v=new URL(c.url);v.pathname=v.pathname.replace(/\.data$/,"").replace(/^\/_root$/,"/");let h=Ct(r,v.pathname,t.basename);if(g=await zn(n,t,i,c,v,l,p),t.entry.module.handleDataRequest&&(g=await t.entry.module.handleDataRequest(g,{context:l,params:h?h[0].params:{},request:c}),Qe(g))){let m=Ar(g.status,g.headers);c.method==="GET"&&(m={[jt]:m});let _=new Headers(g.headers);return _.set("Content-Type","text/x-turbo"),new Response(ce(m,c.signal,t.entry.module.streamTimeout,n),{status:200,headers:_})}}else if(f&&f[f.length-1].route.module.default==null&&f[f.length-1].route.module.ErrorBoundary==null)g=await Kn(n,t,i,f.slice(-1)[0].route.id,c,l,p);else{var w,y;let v=a===te.Development?await((w=xt())===null||w===void 0||(y=w.getCriticalCss)===null||y===void 0?void 0:y.call(w,t,u.pathname)):void 0;g=await Gn(n,t,i,c,l,p,v)}return c.method==="HEAD"?new Response(null,{headers:g.headers,status:g.status,statusText:g.statusText}):g}};async function Bn(e,a,t,r,n,i,o){try{let s=await t.queryRoute(n,{routeId:r,requestContext:i});if(Qe(s))return Jt(s,a.basename);if(et in s){let c=s[et],l=Er(c,n.signal,e),u=c.init||{},f=new Headers(u.headers);return f.set("Content-Type","text/remix-deferred"),f.set("X-Remix-Response","yes"),u.headers=f,new Response(l,u)}return s.headers.set("X-Remix-Response","yes"),s}catch(s){if(z(s))return s.headers.set("X-Remix-Catch","yes"),s;if(de(s))return o(s),qt(s,e);let c=s instanceof Error||s instanceof DOMException?s:new Error("Unexpected Server Error");return o(c),Mt(it(c,e),{status:500,headers:{"X-Remix-Error":"yes"}})}}async function zn(e,a,t,r,n,i,o){let{result:s,headers:c,status:l}=r.method!=="GET"?await Dr(e,t,r,n,i,o):await $r(e,t,r,n,i,o),u=new Headers(c);return u.set("X-Remix-Response","yes"),u.set("Content-Type","text/x-turbo"),new Response(ce(s,r.signal,a.entry.module.streamTimeout,e),{status:l||200,headers:u})}async function Gn(e,a,t,r,n,i,o){let s,c=Tt();try{s=await t.query(r,{requestContext:n,unstable_dataStrategy:a.future.unstable_singleFetch?Fr(c):void 0})}catch(g){return i(g),new Response(null,{status:500})}if(z(s))return s;let l,u;if(a.future.unstable_singleFetch){let g=Pr(s,c);if(l=g.statusCode,u=g.headers,Pt(l)&&u.has("Location"))return new Response(null,{status:l,headers:u})}else l=s.statusCode,u=En(a,s);s.errors&&(Object.values(s.errors).forEach(g=>{(!de(g)||g.error)&&!Lr(g)&&i(g)}),s.errors=gt(s.errors,e));let f={loaderData:s.loaderData,actionData:s.actionData,errors:mt(s.errors,e)},d={manifest:a.assets,routeModules:Un(a.routes),staticHandlerContext:s,criticalCss:o,serverHandoffString:Rt({url:s.location.pathname,basename:a.basename,criticalCss:o,future:a.future,isSpaMode:a.isSpaMode,...a.future.unstable_singleFetch?null:{state:f}}),...a.future.unstable_singleFetch?{serverHandoffStream:ce(f,r.signal,a.entry.module.streamTimeout,e),renderMeta:{}}:null,future:a.future,isSpaMode:a.isSpaMode,serializeError:g=>it(g,e)},p=a.entry.module.default;try{return await p(r,l,u,d,n)}catch(g){i(g);let w=g;if(z(g))try{let v=await Vn(g);w=new Mr(g.status,g.statusText,v)}catch{}s=Tr(t.dataRoutes,s,w),s.errors&&(s.errors=gt(s.errors,e));let y={loaderData:s.loaderData,actionData:s.actionData,errors:mt(s.errors,e)};d={...d,staticHandlerContext:s,serverHandoffString:Rt({url:s.location.pathname,basename:a.basename,future:a.future,isSpaMode:a.isSpaMode,...a.future.unstable_singleFetch?null:{state:y}}),...a.future.unstable_singleFetch?{serverHandoffStream:ce(y,r.signal,a.entry.module.streamTimeout,e),renderMeta:{}}:null};try{return await p(r,s.statusCode,u,d,n)}catch(v){return i(v),Xt(v,e)}}}async function Kn(e,a,t,r,n,i,o){try{let s=a.future.unstable_singleFetch?Tt():{},c=await t.queryRoute(n,{routeId:r,requestContext:i,...a.future.unstable_singleFetch?{unstable_dataStrategy:jr({responseStubs:s})}:null});if(typeof c=="object"&&St(!(et in c),`You cannot return a \`defer()\` response from a Resource Route.  Did you forget to export a default UI component from the "${r}" route?`),a.future.unstable_singleFetch){let l=s[r];if(z(c)){let u=l[Ir];for(let[f,...d]of u)c.headers[f](...d)}else console.warn(Hn(n.method==="GET"?"loader":"action",r)),c=fe(c,{status:l.status,headers:l.headers})}return St(z(c),"Expected a Response to be returned from queryRoute"),c}catch(s){return z(s)?(s.headers.set("X-Remix-Catch","yes"),s):de(s)?(s&&o(s),qt(s,e)):(o(s),Xt(s,e))}}function qt(e,a){return Mt(it(e.error||new Error("Unexpected Server Error"),a),{status:e.status,statusText:e.statusText,headers:{"X-Remix-Error":"yes"}})}function Xt(e,a){let t="Unexpected Server Error";return a!==te.Production&&(t+=`

${String(e)}`),new Response(t,{status:500,headers:{"Content-Type":"text/plain"}})}function Vn(e){let a=e.headers.get("Content-Type");return a&&/\bapplication\/json\b/.test(a)?e.body==null?null:e.json():e.text()}function Jt(e,a){let t=new Headers(e.headers),r=t.get("Location");return t.set("X-Remix-Redirect",a&&Hr(r,a)||r),t.set("X-Remix-Status",String(e.status)),t.delete("Location"),e.headers.get("Set-Cookie")!==null&&t.set("X-Remix-Revalidate","yes"),new Response(null,{status:204,headers:t})}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function je(e){return`__flash_${e}__`}const ut=(e={},a="")=>{let t=new Map(Object.entries(e));return{get id(){return a},get data(){return Object.fromEntries(t)},has(r){return t.has(r)||t.has(je(r))},get(r){if(t.has(r))return t.get(r);let n=je(r);if(t.has(n)){let i=t.get(n);return t.delete(n),i}},set(r,n){t.set(r,n)},flash(r,n){t.set(je(r),n)},unset(r){t.delete(r)}}},Wn=e=>e!=null&&typeof e.id=="string"&&typeof e.data<"u"&&typeof e.has=="function"&&typeof e.get=="function"&&typeof e.set=="function"&&typeof e.flash=="function"&&typeof e.unset=="function",qn=e=>({cookie:a,createData:t,readData:r,updateData:n,deleteData:i})=>{let o=ot(a)?a:e((a==null?void 0:a.name)||"__session",a);return Yt(o),{async getSession(s,c){let l=s&&await o.parse(s,c),u=l&&await r(l);return ut(u||{},l||"")},async commitSession(s,c){let{id:l,data:u}=s,f=(c==null?void 0:c.maxAge)!=null?new Date(Date.now()+c.maxAge*1e3):(c==null?void 0:c.expires)!=null?c.expires:o.expires;return l?await n(l,u,f):l=await t(u,f),o.serialize(l,c)},async destroySession(s,c){return await i(s.id),o.serialize("",{...c,maxAge:void 0,expires:new Date(0)})}}};function Yt(e){It(e.isSigned,`The "${e.name}" cookie is not signed, but session cookies should be signed to prevent tampering on the client before they are sent back to the server. See https://remix.run/utils/cookies#signing-cookies for more information.`)}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Xn=e=>({cookie:a}={})=>{let t=ot(a)?a:e((a==null?void 0:a.name)||"__session",a);return Yt(t),{async getSession(r,n){return ut(r&&await t.parse(r,n)||{})},async commitSession(r,n){let i=await t.serialize(r.data,n);if(i.length>4096)throw new Error("Cookie length will exceed browser maximum. Length: "+i.length);return i},async destroySession(r,n){return t.serialize("",{...n,maxAge:void 0,expires:new Date(0)})}}};/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Jn=e=>({cookie:a}={})=>{let t=new Map;return e({cookie:a,async createData(r,n){let i=Math.random().toString(36).substring(2,10);return t.set(i,{data:r,expires:n}),i},async readData(r){if(t.has(r)){let{data:n,expires:i}=t.get(r);if(!i||i>new Date)return n;i&&t.delete(r)}return null},async updateData(r,n,i){t.set(r,{data:n,expires:i})},async deleteData(r){t.delete(r)}})};/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */class Zt extends Error{constructor(a,t){super(`Field "${a}" exceeded upload size of ${t} bytes.`),this.field=a,this.maxBytes=t}}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yn({filter:e,maxPartSize:a=3e6}={}){return async({filename:t,contentType:r,name:n,data:i})=>{if(e&&!await e({filename:t,contentType:r,name:n}))return;let o=0,s=[];for await(let c of i){if(o+=c.byteLength,o>a)throw new Zt(n,a);s.push(c)}return typeof t=="string"?new File(s,t,{type:r}):await new Blob(s,{type:r}).text()}}/**
 * @remix-run/server-runtime v2.9.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Zn=Object.freeze(Object.defineProperty({__proto__:null,MaxPartSizeExceededError:Zt,UNSAFE_SingleFetchRedirectSymbol:jt,broadcastDevReady:Tn,createCookieFactory:un,createCookieSessionStorageFactory:Xn,createMemorySessionStorageFactory:Jn,createRequestHandler:Nn,createSession:ut,createSessionStorageFactory:qn,defer:zr,isCookie:ot,isSession:Wn,json:fe,logDevReady:jn,redirect:Lt,redirectDocument:Gr,unstable_composeUploadHandlers:Rn,unstable_createMemoryUploadHandler:Yn,unstable_defineAction:Kr,unstable_defineLoader:Vr,unstable_parseMultipartFormData:xn,unstable_setDevServerHooks:In},Symbol.toStringTag,{value:"Module"})),Qn=()=>{const[e,a]=Rr.useState(!1),t=()=>{a(!e)};return[e?"text":"password",M.jsx("span",{onClick:t,className:"w-[10%] opacity-60 cursor-pointer px-3",children:e?M.jsx(xr,{}):M.jsx(Ur,{})})]},Qi=Qn,ea=({children:e})=>M.jsx("p",{className:"text-white bg-red-500 p-2 text-center capitalize font-semibold rounded-md",children:e}),eo=ea;var Qt={},ct={},K={};const re=at(Zn);var nt={exports:{}},Ie,Ot;function ta(){if(Ot)return Ie;Ot=1;var e=1e3,a=e*60,t=a*60,r=t*24,n=r*7,i=r*365.25;Ie=function(u,f){f=f||{};var d=typeof u;if(d==="string"&&u.length>0)return o(u);if(d==="number"&&isFinite(u))return f.long?c(u):s(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function o(u){if(u=String(u),!(u.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(f){var d=parseFloat(f[1]),p=(f[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return d*i;case"weeks":case"week":case"w":return d*n;case"days":case"day":case"d":return d*r;case"hours":case"hour":case"hrs":case"hr":case"h":return d*t;case"minutes":case"minute":case"mins":case"min":case"m":return d*a;case"seconds":case"second":case"secs":case"sec":case"s":return d*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return d;default:return}}}}function s(u){var f=Math.abs(u);return f>=r?Math.round(u/r)+"d":f>=t?Math.round(u/t)+"h":f>=a?Math.round(u/a)+"m":f>=e?Math.round(u/e)+"s":u+"ms"}function c(u){var f=Math.abs(u);return f>=r?l(u,f,r,"day"):f>=t?l(u,f,t,"hour"):f>=a?l(u,f,a,"minute"):f>=e?l(u,f,e,"second"):u+" ms"}function l(u,f,d,p){var g=f>=d*1.5;return Math.round(u/d)+" "+p+(g?"s":"")}return Ie}function ra(e){t.debug=t,t.default=t,t.coerce=c,t.disable=i,t.enable=n,t.enabled=o,t.humanize=ta(),t.destroy=l,Object.keys(e).forEach(u=>{t[u]=e[u]}),t.names=[],t.skips=[],t.formatters={};function a(u){let f=0;for(let d=0;d<u.length;d++)f=(f<<5)-f+u.charCodeAt(d),f|=0;return t.colors[Math.abs(f)%t.colors.length]}t.selectColor=a;function t(u){let f,d=null,p,g;function w(...y){if(!w.enabled)return;const v=w,h=Number(new Date),m=h-(f||h);v.diff=m,v.prev=f,v.curr=h,f=h,y[0]=t.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let _=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(C,R)=>{if(C==="%%")return"%";_++;const T=t.formatters[R];if(typeof T=="function"){const x=y[_];C=T.call(v,x),y.splice(_,1),_--}return C}),t.formatArgs.call(v,y),(v.log||t.log).apply(v,y)}return w.namespace=u,w.useColors=t.useColors(),w.color=t.selectColor(u),w.extend=r,w.destroy=t.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(p!==t.namespaces&&(p=t.namespaces,g=t.enabled(u)),g),set:y=>{d=y}}),typeof t.init=="function"&&t.init(w),w}function r(u,f){const d=t(this.namespace+(typeof f>"u"?":":f)+u);return d.log=this.log,d}function n(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let f;const d=(typeof u=="string"?u:"").split(/[\s,]+/),p=d.length;for(f=0;f<p;f++)d[f]&&(u=d[f].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function i(){const u=[...t.names.map(s),...t.skips.map(s).map(f=>"-"+f)].join(",");return t.enable(""),u}function o(u){if(u[u.length-1]==="*")return!0;let f,d;for(f=0,d=t.skips.length;f<d;f++)if(t.skips[f].test(u))return!1;for(f=0,d=t.names.length;f<d;f++)if(t.names[f].test(u))return!0;return!1}function s(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function c(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var na=ra;(function(e,a){var t={};a.formatArgs=n,a.save=i,a.load=o,a.useColors=r,a.storage=s(),a.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),a.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let f=0,d=0;l[0].replace(/%[a-zA-Z%]/g,p=>{p!=="%%"&&(f++,p==="%c"&&(d=f))}),l.splice(d,0,u)}a.log=console.debug||console.log||(()=>{});function i(l){try{l?a.storage.setItem("debug",l):a.storage.removeItem("debug")}catch{}}function o(){let l;try{l=a.storage.getItem("debug")}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=t.DEBUG),l}function s(){try{return localStorage}catch{}}e.exports=na(a);const{formatters:c}=e.exports;c.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}})(nt,nt.exports);var er=nt.exports,ge={},me={};Object.defineProperty(me,"__esModule",{value:!0});me.Authenticator=void 0;const Z=re;class aa{constructor(a,t={}){var r;this.sessionStorage=a,this.strategies=new Map,this.sessionKey=t.sessionKey||"user",this.sessionErrorKey=t.sessionErrorKey||"auth:error",this.sessionStrategyKey=t.sessionStrategyKey||"strategy",this.throwOnError=(r=t.throwOnError)!==null&&r!==void 0?r:!1}use(a,t){return this.strategies.set(t??a.name,a),this}unuse(a){return this.strategies.delete(a),this}authenticate(a,t,r={}){const n=this.strategies.get(a);if(!n)throw new Error(`Strategy ${a} not found.`);return n.authenticate(new Request(t.url,t),this.sessionStorage,{throwOnError:this.throwOnError,...r,name:a,sessionKey:this.sessionKey,sessionErrorKey:this.sessionErrorKey,sessionStrategyKey:this.sessionStrategyKey})}async isAuthenticated(a,t={}){var r;let i=(r=((0,Z.isSession)(a)?a:await this.sessionStorage.getSession(a.headers.get("Cookie"))).get(this.sessionKey))!==null&&r!==void 0?r:null;if(i){if(t.successRedirect)throw(0,Z.redirect)(t.successRedirect,{headers:t.headers});return i}if(t.failureRedirect)throw(0,Z.redirect)(t.failureRedirect,{headers:t.headers});return null}async logout(a,t){let r=(0,Z.isSession)(a)?a:await this.sessionStorage.getSession(a.headers.get("Cookie"));throw(0,Z.redirect)(t.redirectTo,{headers:{"Set-Cookie":await this.sessionStorage.destroySession(r)}})}}me.Authenticator=aa;var ve={};Object.defineProperty(ve,"__esModule",{value:!0});ve.Authorizer=void 0;const Q=re;class ia{constructor(a,t=[]){this.authenticator=a,this.rules=t}async authorize(a,{failureRedirect:t,raise:r="response",rules:n=[]}={}){let i=await this.authenticator.isAuthenticated(a.request);if(!i)throw r==="response"?(0,Q.json)({message:"Not authenticated."},{status:401}):r==="redirect"?(0,Q.redirect)(t):new Error("Not authenticated.");for(let o of[...this.rules,...n])if(!await o({user:i,...a}))throw r==="redirect"?(0,Q.redirect)(t):r==="response"?o.name?(0,Q.json)({message:`Forbidden by policy ${o.name}`},{status:403}):(0,Q.json)({message:"Forbidden"},{status:403}):o.name?new Error(`Forbidden by policy ${o.name}`):new Error("Forbidden.");return i}}ve.Authorizer=ia;var ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.AuthorizationError=void 0;class oa extends Error{constructor(a,t){super(a),this.cause=t}}ne.AuthorizationError=oa;var ye={};Object.defineProperty(ye,"__esModule",{value:!0});ye.Strategy=void 0;const He=re,sa=ne;class ua{constructor(a){this.verify=a}async failure(a,t,r,n,i){if(!n.failureRedirect)throw n.throwOnError?new sa.AuthorizationError(a,i):(0,He.json)({message:a},401);let o=await r.getSession(t.headers.get("Cookie"));throw o.flash(n.sessionErrorKey,{message:a}),(0,He.redirect)(n.failureRedirect,{headers:{"Set-Cookie":await r.commitSession(o)}})}async success(a,t,r,n){var i;if(!n.successRedirect)return a;let o=await r.getSession(t.headers.get("Cookie"));throw o.set(n.sessionKey,a),o.set(n.sessionStrategyKey,(i=n.name)!==null&&i!==void 0?i:this.name),(0,He.redirect)(n.successRedirect,{headers:{"Set-Cookie":await r.commitSession(o)}})}}ye.Strategy=ua;(function(e){var a=b&&b.__createBinding||(Object.create?function(r,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(r,o,s)}:function(r,n,i,o){o===void 0&&(o=i),r[o]=n[i]}),t=b&&b.__exportStar||function(r,n){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&a(n,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(me,e),t(ve,e),t(ne,e),t(ye,e)})(ge);var tr={},_e={},we={};Object.defineProperty(we,"__esModule",{value:!0});we.default=la;let se;const ca=new Uint8Array(16);function la(){if(!se&&(se=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!se))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return se(ca)}var V={},q={},be={};Object.defineProperty(be,"__esModule",{value:!0});be.default=void 0;var fa=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;be.default=fa;Object.defineProperty(q,"__esModule",{value:!0});q.default=void 0;var da=ha(be);function ha(e){return e&&e.__esModule?e:{default:e}}function pa(e){return typeof e=="string"&&da.default.test(e)}var ga=pa;q.default=ga;Object.defineProperty(V,"__esModule",{value:!0});V.default=void 0;V.unsafeStringify=rr;var ma=va(q);function va(e){return e&&e.__esModule?e:{default:e}}const U=[];for(let e=0;e<256;++e)U.push((e+256).toString(16).slice(1));function rr(e,a=0){return U[e[a+0]]+U[e[a+1]]+U[e[a+2]]+U[e[a+3]]+"-"+U[e[a+4]]+U[e[a+5]]+"-"+U[e[a+6]]+U[e[a+7]]+"-"+U[e[a+8]]+U[e[a+9]]+"-"+U[e[a+10]]+U[e[a+11]]+U[e[a+12]]+U[e[a+13]]+U[e[a+14]]+U[e[a+15]]}function ya(e,a=0){const t=rr(e,a);if(!(0,ma.default)(t))throw TypeError("Stringified UUID is invalid");return t}var _a=ya;V.default=_a;Object.defineProperty(_e,"__esModule",{value:!0});_e.default=void 0;var wa=Sa(we),ba=V;function Sa(e){return e&&e.__esModule?e:{default:e}}let kt,Ne,Be=0,ze=0;function Ca(e,a,t){let r=a&&t||0;const n=a||new Array(16);e=e||{};let i=e.node||kt,o=e.clockseq!==void 0?e.clockseq:Ne;if(i==null||o==null){const d=e.random||(e.rng||wa.default)();i==null&&(i=kt=[d[0]|1,d[1],d[2],d[3],d[4],d[5]]),o==null&&(o=Ne=(d[6]<<8|d[7])&16383)}let s=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:ze+1;const l=s-Be+(c-ze)/1e4;if(l<0&&e.clockseq===void 0&&(o=o+1&16383),(l<0||s>Be)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Be=s,ze=c,Ne=o,s+=122192928e5;const u=((s&268435455)*1e4+c)%4294967296;n[r++]=u>>>24&255,n[r++]=u>>>16&255,n[r++]=u>>>8&255,n[r++]=u&255;const f=s/4294967296*1e4&268435455;n[r++]=f>>>8&255,n[r++]=f&255,n[r++]=f>>>24&15|16,n[r++]=f>>>16&255,n[r++]=o>>>8|128,n[r++]=o&255;for(let d=0;d<6;++d)n[r+d]=i[d];return a||(0,ba.unsafeStringify)(n)}var Ra=Ca;_e.default=Ra;var Se={},G={},ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.default=void 0;var xa=Ua(q);function Ua(e){return e&&e.__esModule?e:{default:e}}function Oa(e){if(!(0,xa.default)(e))throw TypeError("Invalid UUID");let a;const t=new Uint8Array(16);return t[0]=(a=parseInt(e.slice(0,8),16))>>>24,t[1]=a>>>16&255,t[2]=a>>>8&255,t[3]=a&255,t[4]=(a=parseInt(e.slice(9,13),16))>>>8,t[5]=a&255,t[6]=(a=parseInt(e.slice(14,18),16))>>>8,t[7]=a&255,t[8]=(a=parseInt(e.slice(19,23),16))>>>8,t[9]=a&255,t[10]=(a=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=a/4294967296&255,t[12]=a>>>24&255,t[13]=a>>>16&255,t[14]=a>>>8&255,t[15]=a&255,t}var ka=Oa;ae.default=ka;Object.defineProperty(G,"__esModule",{value:!0});G.URL=G.DNS=void 0;G.default=Fa;var Aa=V,Ea=Da(ae);function Da(e){return e&&e.__esModule?e:{default:e}}function $a(e){e=unescape(encodeURIComponent(e));const a=[];for(let t=0;t<e.length;++t)a.push(e.charCodeAt(t));return a}const nr="6ba7b810-9dad-11d1-80b4-00c04fd430c8";G.DNS=nr;const ar="6ba7b811-9dad-11d1-80b4-00c04fd430c8";G.URL=ar;function Fa(e,a,t){function r(n,i,o,s){var c;if(typeof n=="string"&&(n=$a(n)),typeof i=="string"&&(i=(0,Ea.default)(i)),((c=i)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let l=new Uint8Array(16+n.length);if(l.set(i),l.set(n,i.length),l=t(l),l[6]=l[6]&15|a,l[8]=l[8]&63|128,o){s=s||0;for(let u=0;u<16;++u)o[s+u]=l[u];return o}return(0,Aa.unsafeStringify)(l)}try{r.name=e}catch{}return r.DNS=nr,r.URL=ar,r}var Ce={};Object.defineProperty(Ce,"__esModule",{value:!0});Ce.default=void 0;function Pa(e){if(typeof e=="string"){const a=unescape(encodeURIComponent(e));e=new Uint8Array(a.length);for(let t=0;t<a.length;++t)e[t]=a.charCodeAt(t)}return La(Ma(Ta(e),e.length*8))}function La(e){const a=[],t=e.length*32,r="0123456789abcdef";for(let n=0;n<t;n+=8){const i=e[n>>5]>>>n%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);a.push(o)}return a}function ir(e){return(e+64>>>9<<4)+14+1}function Ma(e,a){e[a>>5]|=128<<a%32,e[ir(a)-1]=a;let t=1732584193,r=-271733879,n=-1732584194,i=271733878;for(let o=0;o<e.length;o+=16){const s=t,c=r,l=n,u=i;t=k(t,r,n,i,e[o],7,-680876936),i=k(i,t,r,n,e[o+1],12,-389564586),n=k(n,i,t,r,e[o+2],17,606105819),r=k(r,n,i,t,e[o+3],22,-1044525330),t=k(t,r,n,i,e[o+4],7,-176418897),i=k(i,t,r,n,e[o+5],12,1200080426),n=k(n,i,t,r,e[o+6],17,-1473231341),r=k(r,n,i,t,e[o+7],22,-45705983),t=k(t,r,n,i,e[o+8],7,1770035416),i=k(i,t,r,n,e[o+9],12,-1958414417),n=k(n,i,t,r,e[o+10],17,-42063),r=k(r,n,i,t,e[o+11],22,-1990404162),t=k(t,r,n,i,e[o+12],7,1804603682),i=k(i,t,r,n,e[o+13],12,-40341101),n=k(n,i,t,r,e[o+14],17,-1502002290),r=k(r,n,i,t,e[o+15],22,1236535329),t=A(t,r,n,i,e[o+1],5,-165796510),i=A(i,t,r,n,e[o+6],9,-1069501632),n=A(n,i,t,r,e[o+11],14,643717713),r=A(r,n,i,t,e[o],20,-373897302),t=A(t,r,n,i,e[o+5],5,-701558691),i=A(i,t,r,n,e[o+10],9,38016083),n=A(n,i,t,r,e[o+15],14,-660478335),r=A(r,n,i,t,e[o+4],20,-405537848),t=A(t,r,n,i,e[o+9],5,568446438),i=A(i,t,r,n,e[o+14],9,-1019803690),n=A(n,i,t,r,e[o+3],14,-187363961),r=A(r,n,i,t,e[o+8],20,1163531501),t=A(t,r,n,i,e[o+13],5,-1444681467),i=A(i,t,r,n,e[o+2],9,-51403784),n=A(n,i,t,r,e[o+7],14,1735328473),r=A(r,n,i,t,e[o+12],20,-1926607734),t=E(t,r,n,i,e[o+5],4,-378558),i=E(i,t,r,n,e[o+8],11,-2022574463),n=E(n,i,t,r,e[o+11],16,1839030562),r=E(r,n,i,t,e[o+14],23,-35309556),t=E(t,r,n,i,e[o+1],4,-1530992060),i=E(i,t,r,n,e[o+4],11,1272893353),n=E(n,i,t,r,e[o+7],16,-155497632),r=E(r,n,i,t,e[o+10],23,-1094730640),t=E(t,r,n,i,e[o+13],4,681279174),i=E(i,t,r,n,e[o],11,-358537222),n=E(n,i,t,r,e[o+3],16,-722521979),r=E(r,n,i,t,e[o+6],23,76029189),t=E(t,r,n,i,e[o+9],4,-640364487),i=E(i,t,r,n,e[o+12],11,-421815835),n=E(n,i,t,r,e[o+15],16,530742520),r=E(r,n,i,t,e[o+2],23,-995338651),t=D(t,r,n,i,e[o],6,-198630844),i=D(i,t,r,n,e[o+7],10,1126891415),n=D(n,i,t,r,e[o+14],15,-1416354905),r=D(r,n,i,t,e[o+5],21,-57434055),t=D(t,r,n,i,e[o+12],6,1700485571),i=D(i,t,r,n,e[o+3],10,-1894986606),n=D(n,i,t,r,e[o+10],15,-1051523),r=D(r,n,i,t,e[o+1],21,-2054922799),t=D(t,r,n,i,e[o+8],6,1873313359),i=D(i,t,r,n,e[o+15],10,-30611744),n=D(n,i,t,r,e[o+6],15,-1560198380),r=D(r,n,i,t,e[o+13],21,1309151649),t=D(t,r,n,i,e[o+4],6,-145523070),i=D(i,t,r,n,e[o+11],10,-1120210379),n=D(n,i,t,r,e[o+2],15,718787259),r=D(r,n,i,t,e[o+9],21,-343485551),t=N(t,s),r=N(r,c),n=N(n,l),i=N(i,u)}return[t,r,n,i]}function Ta(e){if(e.length===0)return[];const a=e.length*8,t=new Uint32Array(ir(a));for(let r=0;r<a;r+=8)t[r>>5]|=(e[r/8]&255)<<r%32;return t}function N(e,a){const t=(e&65535)+(a&65535);return(e>>16)+(a>>16)+(t>>16)<<16|t&65535}function ja(e,a){return e<<a|e>>>32-a}function Re(e,a,t,r,n,i){return N(ja(N(N(a,e),N(r,i)),n),t)}function k(e,a,t,r,n,i,o){return Re(a&t|~a&r,e,a,n,i,o)}function A(e,a,t,r,n,i,o){return Re(a&r|t&~r,e,a,n,i,o)}function E(e,a,t,r,n,i,o){return Re(a^t^r,e,a,n,i,o)}function D(e,a,t,r,n,i,o){return Re(t^(a|~r),e,a,n,i,o)}var Ia=Pa;Ce.default=Ia;Object.defineProperty(Se,"__esModule",{value:!0});Se.default=void 0;var Ha=or(G),Na=or(Ce);function or(e){return e&&e.__esModule?e:{default:e}}const Ba=(0,Ha.default)("v3",48,Na.default);var za=Ba;Se.default=za;var xe={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.default=void 0;const Ga=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Ka={randomUUID:Ga};Ue.default=Ka;Object.defineProperty(xe,"__esModule",{value:!0});xe.default=void 0;var At=sr(Ue),Va=sr(we),Wa=V;function sr(e){return e&&e.__esModule?e:{default:e}}function qa(e,a,t){if(At.default.randomUUID&&!a&&!e)return At.default.randomUUID();e=e||{};const r=e.random||(e.rng||Va.default)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,a){t=t||0;for(let n=0;n<16;++n)a[t+n]=r[n];return a}return(0,Wa.unsafeStringify)(r)}var Xa=qa;xe.default=Xa;var Oe={},ke={};Object.defineProperty(ke,"__esModule",{value:!0});ke.default=void 0;function Ja(e,a,t,r){switch(e){case 0:return a&t^~a&r;case 1:return a^t^r;case 2:return a&t^a&r^t&r;case 3:return a^t^r}}function Ge(e,a){return e<<a|e>>>32-a}function Ya(e){const a=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){const o=unescape(encodeURIComponent(e));e=[];for(let s=0;s<o.length;++s)e.push(o.charCodeAt(s))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);const r=e.length/4+2,n=Math.ceil(r/16),i=new Array(n);for(let o=0;o<n;++o){const s=new Uint32Array(16);for(let c=0;c<16;++c)s[c]=e[o*64+c*4]<<24|e[o*64+c*4+1]<<16|e[o*64+c*4+2]<<8|e[o*64+c*4+3];i[o]=s}i[n-1][14]=(e.length-1)*8/Math.pow(2,32),i[n-1][14]=Math.floor(i[n-1][14]),i[n-1][15]=(e.length-1)*8&4294967295;for(let o=0;o<n;++o){const s=new Uint32Array(80);for(let p=0;p<16;++p)s[p]=i[o][p];for(let p=16;p<80;++p)s[p]=Ge(s[p-3]^s[p-8]^s[p-14]^s[p-16],1);let c=t[0],l=t[1],u=t[2],f=t[3],d=t[4];for(let p=0;p<80;++p){const g=Math.floor(p/20),w=Ge(c,5)+Ja(g,l,u,f)+d+a[g]+s[p]>>>0;d=f,f=u,u=Ge(l,30)>>>0,l=c,c=w}t[0]=t[0]+c>>>0,t[1]=t[1]+l>>>0,t[2]=t[2]+u>>>0,t[3]=t[3]+f>>>0,t[4]=t[4]+d>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Za=Ya;ke.default=Za;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.default=void 0;var Qa=ur(G),ei=ur(ke);function ur(e){return e&&e.__esModule?e:{default:e}}const ti=(0,Qa.default)("v5",80,ei.default);var ri=ti;Oe.default=ri;var Ae={};Object.defineProperty(Ae,"__esModule",{value:!0});Ae.default=void 0;var ni="00000000-0000-0000-0000-000000000000";Ae.default=ni;var Ee={};Object.defineProperty(Ee,"__esModule",{value:!0});Ee.default=void 0;var ai=ii(q);function ii(e){return e&&e.__esModule?e:{default:e}}function oi(e){if(!(0,ai.default)(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var si=oi;Ee.default=si;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"NIL",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(e,"parse",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(e,"v1",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"v3",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(e,"v4",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(e,"v5",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(e,"validate",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return o.default}});var a=u(_e),t=u(Se),r=u(xe),n=u(Oe),i=u(Ae),o=u(Ee),s=u(q),c=u(V),l=u(ae);function u(f){return f&&f.__esModule?f:{default:f}}})(tr);var ui=b&&b.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(K,"__esModule",{value:!0});K.OAuth2Strategy=void 0;const ci=re,li=ui(er),fi=ge,di=tr;let I=(0,li.default)("OAuth2Strategy");class hi extends fi.Strategy{constructor(a,t){var r,n;super(t),this.name="oauth2",this.sessionStateKey="oauth2:state",this.authorizationURL=a.authorizationURL,this.tokenURL=a.tokenURL,this.clientID=a.clientID,this.clientSecret=a.clientSecret,this.callbackURL=a.callbackURL,this.scope=a.scope,this.responseType=(r=a.responseType)!==null&&r!==void 0?r:"code",this.useBasicAuthenticationHeader=(n=a.useBasicAuthenticationHeader)!==null&&n!==void 0?n:!1}async authenticate(a,t,r){var n;I("Request URL",a.url);let i=new URL(a.url),o=await t.getSession(a.headers.get("Cookie")),s=(n=o.get(r.sessionKey))!==null&&n!==void 0?n:null;if(s)return I("User is authenticated"),this.success(s,a,t,r);let c=this.getCallbackURL(a);if(I("Callback URL",c),i.pathname!==c.pathname){I("Redirecting to callback URL");let d=this.generateState();throw I("State",d),o.set(this.sessionStateKey,d),(0,ci.redirect)(this.getAuthorizationURL(a,d).toString(),{headers:{"Set-Cookie":await t.commitSession(o)}})}let l=i.searchParams.get("state");if(I("State from URL",l),!l)return await this.failure("Missing state on URL.",a,t,r,new Error("Missing state on URL."));let u=o.get(this.sessionStateKey);if(I("State from session",u),!u)return await this.failure("Missing state on session.",a,t,r,new Error("Missing state on session."));if(u===l)I("State is valid"),o.unset(this.sessionStateKey);else return await this.failure("State doesn't match.",a,t,r,new Error("State doesn't match."));let f=i.searchParams.get("code");if(!f)return await this.failure("Missing code.",a,t,r,new Error("Missing code."));try{let d=new URLSearchParams(this.tokenParams());d.set("grant_type","authorization_code"),d.set("redirect_uri",c.toString());let{accessToken:p,refreshToken:g,extraParams:w}=await this.fetchAccessToken(f,d),y=await this.userProfile(p,w);s=await this.verify({accessToken:p,refreshToken:g,extraParams:w,profile:y,context:r.context,request:a})}catch(d){if(I("Failed to verify user",d),d instanceof Response)throw d;return d instanceof Error?await this.failure(d.message,a,t,r,d):typeof d=="string"?await this.failure(d,a,t,r,new Error(d)):await this.failure("Unknown error",a,t,r,new Error(JSON.stringify(d,null,2)))}return I("User authenticated"),await this.success(s,a,t,r)}async userProfile(a,t){return{provider:"oauth2"}}authorizationParams(a){return new URLSearchParams(a)}tokenParams(){return new URLSearchParams}async getAccessToken(a){let{access_token:t,refresh_token:r,...n}=await a.json();return{accessToken:t,refreshToken:r,extraParams:n}}getCallbackURL(a){var t,r;if(this.callbackURL.startsWith("http:")||this.callbackURL.startsWith("https:"))return new URL(this.callbackURL);let n=(r=(t=a.headers.get("X-Forwarded-Host"))!==null&&t!==void 0?t:a.headers.get("host"))!==null&&r!==void 0?r:new URL(a.url).host,i=n.includes("localhost")?"http":"https";return this.callbackURL.startsWith("/")?new URL(this.callbackURL,`${i}://${n}`):new URL(`${i}://${this.callbackURL}`)}getAuthorizationURL(a,t){let r=new URLSearchParams(this.authorizationParams(new URL(a.url).searchParams));r.set("response_type",this.responseType),r.set("client_id",this.clientID),r.set("redirect_uri",this.getCallbackURL(a).toString()),r.set("state",t),!r.has("scope")&&this.scope&&r.set("scope",this.scope);let n=new URL(this.authorizationURL);return n.search=r.toString(),n}generateState(){return(0,di.v4)()}async fetchAccessToken(a,t){let r={"Content-Type":"application/x-www-form-urlencoded"};if(this.useBasicAuthenticationHeader){const i=Buffer.from(`${this.clientID}:${this.clientSecret}`).toString("base64");r={...r,Authorization:`Basic ${i}`}}else t.set("client_id",this.clientID),t.set("client_secret",this.clientSecret);t.get("grant_type")==="refresh_token"?t.set("refresh_token",a):t.set("code",a);let n=await fetch(this.tokenURL,{method:"POST",headers:r,body:t});if(!n.ok)throw await n.text();return await this.getAccessToken(n.clone())}}K.OAuth2Strategy=hi;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiscordStrategy=e.DiscordStrategyDefaultName=void 0;const a=K,t="https://discord.com/api/v10";e.DiscordStrategyDefaultName="discord";class r extends a.OAuth2Strategy{constructor({clientID:i,clientSecret:o,callbackURL:s,scope:c,prompt:l},u){super({clientID:i,clientSecret:o,callbackURL:s,authorizationURL:`${t}/oauth2/authorize`,tokenURL:`${t}/oauth2/token`},u),this.name=e.DiscordStrategyDefaultName,this.userInfoURL=`${t}/users/@me`,this.scope=(c??["identify","email"]).join(" "),this.prompt=l}authorizationParams(){const i=new URLSearchParams({scope:this.scope});return this.prompt&&i.set("prompt",this.prompt),i}async userProfile(i){var o;const c=await(await fetch(this.userInfoURL,{headers:{Authorization:`Bearer ${i}`}})).json();return{provider:e.DiscordStrategyDefaultName,id:c.id,displayName:(o=c.global_name)!==null&&o!==void 0?o:c.username,emails:c.email?[{value:c.email}]:void 0,photos:c.avatar?[{value:c.avatar}]:void 0,__json:c}}async getAccessToken(i){const{access_token:o,refresh_token:s,scope:c,...l}=await i.json();return{accessToken:o,refreshToken:s,extraParams:{...l,scope:c.split(" ")}}}}e.DiscordStrategy=r})(ct);var lt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GitHubStrategy=e.GitHubStrategyScopeSeperator=e.GitHubStrategyDefaultScope=e.GitHubStrategyDefaultName=void 0;const a=ge,t=K;e.GitHubStrategyDefaultName="github",e.GitHubStrategyDefaultScope="user:email",e.GitHubStrategyScopeSeperator=" ";class r extends t.OAuth2Strategy{constructor({clientID:o,clientSecret:s,callbackURL:c,scope:l,allowSignup:u,userAgent:f,userInfoURL:d="https://api.github.com/user",userEmailsURL:p="https://api.github.com/user/emails",authorizationURL:g="https://github.com/login/oauth/authorize",tokenURL:w="https://github.com/login/oauth/access_token"},y){super({clientID:o,clientSecret:s,callbackURL:c,authorizationURL:g,tokenURL:w},y),this.name=e.GitHubStrategyDefaultName,this.scope=this.getScope(l).join(e.GitHubStrategyScopeSeperator),this.allowSignup=u??!0,this.userAgent=f??"Remix Auth",this.userInfoURL=d,this.userEmailsURL=p}getScope(o){if(o){if(typeof o=="string")return o.split(e.GitHubStrategyScopeSeperator)}else return[e.GitHubStrategyDefaultScope];return o}authorizationParams(){return new URLSearchParams({scope:this.scope,allow_signup:String(this.allowSignup)})}async userEmails(o){return(await(await fetch(this.userEmailsURL,{headers:{Accept:"application/vnd.github.v3+json",Authorization:`token ${o}`,"User-Agent":this.userAgent}})).json()).filter(({verified:u})=>u).sort((u,f)=>u.primary&&!f.primary?-1:!u.primary&&f.primary?1:0).map(({email:u})=>({value:u}))}async userProfile(o){let c=await(await fetch(this.userInfoURL,{headers:{Accept:"application/vnd.github.v3+json",Authorization:`token ${o}`,"User-Agent":this.userAgent}})).json(),l=[{value:c.email}];return this.scope.includes(e.GitHubStrategyDefaultScope)&&(l=await this.userEmails(o)),{provider:"github",displayName:c.login,id:c.id.toString(),name:{familyName:c.name,givenName:c.name,middleName:c.name},emails:l,photos:[{value:c.avatar_url}],_json:c}}async getAccessToken(o){var s;let c=new URLSearchParams(await o.text()),l=c.get("access_token");if(!l)throw new a.AuthorizationError("Missing access token.");let u=c.get("token_type");if(!u)throw new a.AuthorizationError("Missing token type.");let f=(s=c.get("refresh_token"))!==null&&s!==void 0?s:"",d=n(c.get("expires_in")),p=n(c.get("refresh_token_expires_in"));return{accessToken:l,refreshToken:f,extraParams:{tokenType:u,accessTokenExpiresIn:d,refreshTokenExpiresIn:p}}}}e.GitHubStrategy=r;function n(i){if(!i)return null;try{return Number.parseInt(i,10)}catch{return null}}})(lt);var ft={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleStrategy=e.GoogleStrategyDefaultName=e.GoogleStrategyDefaultScopes=e.GoogleStrategyScopeSeperator=void 0;const a=K;e.GoogleStrategyScopeSeperator=" ",e.GoogleStrategyDefaultScopes=["openid","https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email"].join(e.GoogleStrategyScopeSeperator),e.GoogleStrategyDefaultName="google";class t extends a.OAuth2Strategy{constructor({clientID:n,clientSecret:i,callbackURL:o,scope:s,accessType:c,includeGrantedScopes:l,prompt:u,hd:f,loginHint:d},p){super({clientID:n,clientSecret:i,callbackURL:o,authorizationURL:"https://accounts.google.com/o/oauth2/v2/auth",tokenURL:"https://oauth2.googleapis.com/token"},p),this.name=e.GoogleStrategyDefaultName,this.userInfoURL="https://www.googleapis.com/oauth2/v3/userinfo",this.scope=this.parseScope(s),this.accessType=c??"online",this.includeGrantedScopes=l??!1,this.prompt=u,this.hd=f,this.loginHint=d}authorizationParams(){const n=new URLSearchParams({access_type:this.accessType,include_granted_scopes:String(this.includeGrantedScopes)});return this.prompt&&n.set("prompt",this.prompt),this.hd&&n.set("hd",this.hd),this.loginHint&&n.set("login_hint",this.loginHint),n}async userProfile(n){const o=await(await fetch(this.userInfoURL,{headers:{Authorization:`Bearer ${n}`}})).json();return{provider:"google",id:o.sub,displayName:o.name,name:{familyName:o.family_name,givenName:o.given_name},emails:[{value:o.email}],photos:[{value:o.picture}],_json:o}}parseScope(n){if(n){if(Array.isArray(n))return n.join(e.GoogleStrategyScopeSeperator)}else return e.GoogleStrategyDefaultScopes;return n}}e.GoogleStrategy=t})(ft);var dt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MicrosoftStrategy=e.MicrosoftStrategyScopeSeperator=e.MicrosoftStrategyDefaultName=e.MicrosoftStrategyDefaultScopes=void 0;const a=K;e.MicrosoftStrategyDefaultScopes=["openid","profile","email"],e.MicrosoftStrategyDefaultName="microsoft",e.MicrosoftStrategyScopeSeperator=" ";class t extends a.OAuth2Strategy{constructor({clientId:n,clientSecret:i,redirectUri:o,scope:s,prompt:c,tenantId:l="common"},u){super({clientID:n,clientSecret:i,callbackURL:o,authorizationURL:`https://login.microsoftonline.com/${l}/oauth2/v2.0/authorize`,tokenURL:`https://login.microsoftonline.com/${l}/oauth2/v2.0/token`},u),this.name=e.MicrosoftStrategyDefaultName,this.userInfoURL="https://graph.microsoft.com/oidc/userinfo",this.scope=this.getScope(s),this.prompt=c??"none"}getScope(n){if(n){if(typeof n=="string")return n}else return e.MicrosoftStrategyDefaultScopes.join(e.MicrosoftStrategyScopeSeperator);return n.join(e.MicrosoftStrategyScopeSeperator)}authorizationParams(){return new URLSearchParams({scope:this.scope,prompt:this.prompt})}async userProfile(n){const o=await(await fetch(this.userInfoURL,{headers:{Authorization:`Bearer ${n}`}})).json();return{provider:e.MicrosoftStrategyDefaultName,displayName:o.name,id:o.sub,name:{familyName:o.family_name,givenName:o.given_name},emails:[{value:o.email}],_json:o}}}e.MicrosoftStrategy=t})(dt);var ht={},ue,pi=new Uint8Array(16);function cr(){if(!ue&&(ue=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ue))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ue(pi)}const gi=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function De(e){return typeof e=="string"&&gi.test(e)}var O=[];for(var Ke=0;Ke<256;++Ke)O.push((Ke+256).toString(16).substr(1));function $e(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(O[e[a+0]]+O[e[a+1]]+O[e[a+2]]+O[e[a+3]]+"-"+O[e[a+4]]+O[e[a+5]]+"-"+O[e[a+6]]+O[e[a+7]]+"-"+O[e[a+8]]+O[e[a+9]]+"-"+O[e[a+10]]+O[e[a+11]]+O[e[a+12]]+O[e[a+13]]+O[e[a+14]]+O[e[a+15]]).toLowerCase();if(!De(t))throw TypeError("Stringified UUID is invalid");return t}var Et,Ve,We=0,qe=0;function mi(e,a,t){var r=a&&t||0,n=a||new Array(16);e=e||{};var i=e.node||Et,o=e.clockseq!==void 0?e.clockseq:Ve;if(i==null||o==null){var s=e.random||(e.rng||cr)();i==null&&(i=Et=[s[0]|1,s[1],s[2],s[3],s[4],s[5]]),o==null&&(o=Ve=(s[6]<<8|s[7])&16383)}var c=e.msecs!==void 0?e.msecs:Date.now(),l=e.nsecs!==void 0?e.nsecs:qe+1,u=c-We+(l-qe)/1e4;if(u<0&&e.clockseq===void 0&&(o=o+1&16383),(u<0||c>We)&&e.nsecs===void 0&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");We=c,qe=l,Ve=o,c+=122192928e5;var f=((c&268435455)*1e4+l)%4294967296;n[r++]=f>>>24&255,n[r++]=f>>>16&255,n[r++]=f>>>8&255,n[r++]=f&255;var d=c/4294967296*1e4&268435455;n[r++]=d>>>8&255,n[r++]=d&255,n[r++]=d>>>24&15|16,n[r++]=d>>>16&255,n[r++]=o>>>8|128,n[r++]=o&255;for(var p=0;p<6;++p)n[r+p]=i[p];return a||$e(n)}function lr(e){if(!De(e))throw TypeError("Invalid UUID");var a,t=new Uint8Array(16);return t[0]=(a=parseInt(e.slice(0,8),16))>>>24,t[1]=a>>>16&255,t[2]=a>>>8&255,t[3]=a&255,t[4]=(a=parseInt(e.slice(9,13),16))>>>8,t[5]=a&255,t[6]=(a=parseInt(e.slice(14,18),16))>>>8,t[7]=a&255,t[8]=(a=parseInt(e.slice(19,23),16))>>>8,t[9]=a&255,t[10]=(a=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=a/4294967296&255,t[12]=a>>>24&255,t[13]=a>>>16&255,t[14]=a>>>8&255,t[15]=a&255,t}function vi(e){e=unescape(encodeURIComponent(e));for(var a=[],t=0;t<e.length;++t)a.push(e.charCodeAt(t));return a}var yi="6ba7b810-9dad-11d1-80b4-00c04fd430c8",_i="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function fr(e,a,t){function r(n,i,o,s){if(typeof n=="string"&&(n=vi(n)),typeof i=="string"&&(i=lr(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+n.length);if(c.set(i),c.set(n,i.length),c=t(c),c[6]=c[6]&15|a,c[8]=c[8]&63|128,o){s=s||0;for(var l=0;l<16;++l)o[s+l]=c[l];return o}return $e(c)}try{r.name=e}catch{}return r.DNS=yi,r.URL=_i,r}function wi(e){if(typeof e=="string"){var a=unescape(encodeURIComponent(e));e=new Uint8Array(a.length);for(var t=0;t<a.length;++t)e[t]=a.charCodeAt(t)}return bi(Si(Ci(e),e.length*8))}function bi(e){for(var a=[],t=e.length*32,r="0123456789abcdef",n=0;n<t;n+=8){var i=e[n>>5]>>>n%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(i&15),16);a.push(o)}return a}function dr(e){return(e+64>>>9<<4)+14+1}function Si(e,a){e[a>>5]|=128<<a%32,e[dr(a)-1]=a;for(var t=1732584193,r=-271733879,n=-1732584194,i=271733878,o=0;o<e.length;o+=16){var s=t,c=r,l=n,u=i;t=$(t,r,n,i,e[o],7,-680876936),i=$(i,t,r,n,e[o+1],12,-389564586),n=$(n,i,t,r,e[o+2],17,606105819),r=$(r,n,i,t,e[o+3],22,-1044525330),t=$(t,r,n,i,e[o+4],7,-176418897),i=$(i,t,r,n,e[o+5],12,1200080426),n=$(n,i,t,r,e[o+6],17,-1473231341),r=$(r,n,i,t,e[o+7],22,-45705983),t=$(t,r,n,i,e[o+8],7,1770035416),i=$(i,t,r,n,e[o+9],12,-1958414417),n=$(n,i,t,r,e[o+10],17,-42063),r=$(r,n,i,t,e[o+11],22,-1990404162),t=$(t,r,n,i,e[o+12],7,1804603682),i=$(i,t,r,n,e[o+13],12,-40341101),n=$(n,i,t,r,e[o+14],17,-1502002290),r=$(r,n,i,t,e[o+15],22,1236535329),t=F(t,r,n,i,e[o+1],5,-165796510),i=F(i,t,r,n,e[o+6],9,-1069501632),n=F(n,i,t,r,e[o+11],14,643717713),r=F(r,n,i,t,e[o],20,-373897302),t=F(t,r,n,i,e[o+5],5,-701558691),i=F(i,t,r,n,e[o+10],9,38016083),n=F(n,i,t,r,e[o+15],14,-660478335),r=F(r,n,i,t,e[o+4],20,-405537848),t=F(t,r,n,i,e[o+9],5,568446438),i=F(i,t,r,n,e[o+14],9,-1019803690),n=F(n,i,t,r,e[o+3],14,-187363961),r=F(r,n,i,t,e[o+8],20,1163531501),t=F(t,r,n,i,e[o+13],5,-1444681467),i=F(i,t,r,n,e[o+2],9,-51403784),n=F(n,i,t,r,e[o+7],14,1735328473),r=F(r,n,i,t,e[o+12],20,-1926607734),t=P(t,r,n,i,e[o+5],4,-378558),i=P(i,t,r,n,e[o+8],11,-2022574463),n=P(n,i,t,r,e[o+11],16,1839030562),r=P(r,n,i,t,e[o+14],23,-35309556),t=P(t,r,n,i,e[o+1],4,-1530992060),i=P(i,t,r,n,e[o+4],11,1272893353),n=P(n,i,t,r,e[o+7],16,-155497632),r=P(r,n,i,t,e[o+10],23,-1094730640),t=P(t,r,n,i,e[o+13],4,681279174),i=P(i,t,r,n,e[o],11,-358537222),n=P(n,i,t,r,e[o+3],16,-722521979),r=P(r,n,i,t,e[o+6],23,76029189),t=P(t,r,n,i,e[o+9],4,-640364487),i=P(i,t,r,n,e[o+12],11,-421815835),n=P(n,i,t,r,e[o+15],16,530742520),r=P(r,n,i,t,e[o+2],23,-995338651),t=L(t,r,n,i,e[o],6,-198630844),i=L(i,t,r,n,e[o+7],10,1126891415),n=L(n,i,t,r,e[o+14],15,-1416354905),r=L(r,n,i,t,e[o+5],21,-57434055),t=L(t,r,n,i,e[o+12],6,1700485571),i=L(i,t,r,n,e[o+3],10,-1894986606),n=L(n,i,t,r,e[o+10],15,-1051523),r=L(r,n,i,t,e[o+1],21,-2054922799),t=L(t,r,n,i,e[o+8],6,1873313359),i=L(i,t,r,n,e[o+15],10,-30611744),n=L(n,i,t,r,e[o+6],15,-1560198380),r=L(r,n,i,t,e[o+13],21,1309151649),t=L(t,r,n,i,e[o+4],6,-145523070),i=L(i,t,r,n,e[o+11],10,-1120210379),n=L(n,i,t,r,e[o+2],15,718787259),r=L(r,n,i,t,e[o+9],21,-343485551),t=B(t,s),r=B(r,c),n=B(n,l),i=B(i,u)}return[t,r,n,i]}function Ci(e){if(e.length===0)return[];for(var a=e.length*8,t=new Uint32Array(dr(a)),r=0;r<a;r+=8)t[r>>5]|=(e[r/8]&255)<<r%32;return t}function B(e,a){var t=(e&65535)+(a&65535),r=(e>>16)+(a>>16)+(t>>16);return r<<16|t&65535}function Ri(e,a){return e<<a|e>>>32-a}function Fe(e,a,t,r,n,i){return B(Ri(B(B(a,e),B(r,i)),n),t)}function $(e,a,t,r,n,i,o){return Fe(a&t|~a&r,e,a,n,i,o)}function F(e,a,t,r,n,i,o){return Fe(a&r|t&~r,e,a,n,i,o)}function P(e,a,t,r,n,i,o){return Fe(a^t^r,e,a,n,i,o)}function L(e,a,t,r,n,i,o){return Fe(t^(a|~r),e,a,n,i,o)}var xi=fr("v3",48,wi);const Ui=xi;function Oi(e,a,t){e=e||{};var r=e.random||(e.rng||cr)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,a){t=t||0;for(var n=0;n<16;++n)a[t+n]=r[n];return a}return $e(r)}function ki(e,a,t,r){switch(e){case 0:return a&t^~a&r;case 1:return a^t^r;case 2:return a&t^a&r^t&r;case 3:return a^t^r}}function Xe(e,a){return e<<a|e>>>32-a}function Ai(e){var a=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=[];for(var n=0;n<r.length;++n)e.push(r.charCodeAt(n))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,o=Math.ceil(i/16),s=new Array(o),c=0;c<o;++c){for(var l=new Uint32Array(16),u=0;u<16;++u)l[u]=e[c*64+u*4]<<24|e[c*64+u*4+1]<<16|e[c*64+u*4+2]<<8|e[c*64+u*4+3];s[c]=l}s[o-1][14]=(e.length-1)*8/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=(e.length-1)*8&4294967295;for(var f=0;f<o;++f){for(var d=new Uint32Array(80),p=0;p<16;++p)d[p]=s[f][p];for(var g=16;g<80;++g)d[g]=Xe(d[g-3]^d[g-8]^d[g-14]^d[g-16],1);for(var w=t[0],y=t[1],v=t[2],h=t[3],m=t[4],_=0;_<80;++_){var S=Math.floor(_/20),C=Xe(w,5)+ki(S,y,v,h)+m+a[S]+d[_]>>>0;m=h,h=v,v=Xe(y,30)>>>0,y=w,w=C}t[0]=t[0]+w>>>0,t[1]=t[1]+y>>>0,t[2]=t[2]+v>>>0,t[3]=t[3]+h>>>0,t[4]=t[4]+m>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var Ei=fr("v5",80,Ai);const Di=Ei,$i="00000000-0000-0000-0000-000000000000";function Fi(e){if(!De(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}const Pi=Object.freeze(Object.defineProperty({__proto__:null,NIL:$i,parse:lr,stringify:$e,v1:mi,v3:Ui,v4:Oi,v5:Di,validate:De,version:Fi},Symbol.toStringTag,{value:"Module"})),Li=at(Pi);var hr={exports:{}};function Mi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Je={exports:{}};const Ti={},ji=Object.freeze(Object.defineProperty({__proto__:null,default:Ti},Symbol.toStringTag,{value:"Module"})),Ii=at(ji);var Dt;function Pe(){return Dt||(Dt=1,function(e,a){(function(t,r){e.exports=r()})(b,function(){var t=t||function(r,n){var i;if(typeof window<"u"&&window.crypto&&(i=window.crypto),typeof self<"u"&&self.crypto&&(i=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(i=globalThis.crypto),!i&&typeof window<"u"&&window.msCrypto&&(i=window.msCrypto),!i&&typeof b<"u"&&b.crypto&&(i=b.crypto),!i&&typeof Mi=="function")try{i=Ii}catch{}var o=function(){if(i){if(typeof i.getRandomValues=="function")try{return i.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof i.randomBytes=="function")try{return i.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function h(){}return function(m){var _;return h.prototype=m,_=new h,h.prototype=null,_}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(h){var m=s(this);return h&&m.mixIn(h),(!m.hasOwnProperty("init")||this.init===m.init)&&(m.init=function(){m.$super.init.apply(this,arguments)}),m.init.prototype=m,m.$super=this,m},create:function(){var h=this.extend();return h.init.apply(h,arguments),h},init:function(){},mixIn:function(h){for(var m in h)h.hasOwnProperty(m)&&(this[m]=h[m]);h.hasOwnProperty("toString")&&(this.toString=h.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),f=l.WordArray=u.extend({init:function(h,m){h=this.words=h||[],m!=n?this.sigBytes=m:this.sigBytes=h.length*4},toString:function(h){return(h||p).stringify(this)},concat:function(h){var m=this.words,_=h.words,S=this.sigBytes,C=h.sigBytes;if(this.clamp(),S%4)for(var R=0;R<C;R++){var T=_[R>>>2]>>>24-R%4*8&255;m[S+R>>>2]|=T<<24-(S+R)%4*8}else for(var x=0;x<C;x+=4)m[S+x>>>2]=_[x>>>2];return this.sigBytes+=C,this},clamp:function(){var h=this.words,m=this.sigBytes;h[m>>>2]&=4294967295<<32-m%4*8,h.length=r.ceil(m/4)},clone:function(){var h=u.clone.call(this);return h.words=this.words.slice(0),h},random:function(h){for(var m=[],_=0;_<h;_+=4)m.push(o());return new f.init(m,h)}}),d=c.enc={},p=d.Hex={stringify:function(h){for(var m=h.words,_=h.sigBytes,S=[],C=0;C<_;C++){var R=m[C>>>2]>>>24-C%4*8&255;S.push((R>>>4).toString(16)),S.push((R&15).toString(16))}return S.join("")},parse:function(h){for(var m=h.length,_=[],S=0;S<m;S+=2)_[S>>>3]|=parseInt(h.substr(S,2),16)<<24-S%8*4;return new f.init(_,m/2)}},g=d.Latin1={stringify:function(h){for(var m=h.words,_=h.sigBytes,S=[],C=0;C<_;C++){var R=m[C>>>2]>>>24-C%4*8&255;S.push(String.fromCharCode(R))}return S.join("")},parse:function(h){for(var m=h.length,_=[],S=0;S<m;S++)_[S>>>2]|=(h.charCodeAt(S)&255)<<24-S%4*8;return new f.init(_,m)}},w=d.Utf8={stringify:function(h){try{return decodeURIComponent(escape(g.stringify(h)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(h){return g.parse(unescape(encodeURIComponent(h)))}},y=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new f.init,this._nDataBytes=0},_append:function(h){typeof h=="string"&&(h=w.parse(h)),this._data.concat(h),this._nDataBytes+=h.sigBytes},_process:function(h){var m,_=this._data,S=_.words,C=_.sigBytes,R=this.blockSize,T=R*4,x=C/T;h?x=r.ceil(x):x=r.max((x|0)-this._minBufferSize,0);var j=x*R,X=r.min(j*4,C);if(j){for(var J=0;J<j;J+=R)this._doProcessBlock(S,J);m=S.splice(0,j),_.sigBytes-=X}return new f.init(m,X)},clone:function(){var h=u.clone.call(this);return h._data=this._data.clone(),h},_minBufferSize:0});l.Hasher=y.extend({cfg:u.extend(),init:function(h){this.cfg=this.cfg.extend(h),this.reset()},reset:function(){y.reset.call(this),this._doReset()},update:function(h){return this._append(h),this._process(),this},finalize:function(h){h&&this._append(h);var m=this._doFinalize();return m},blockSize:16,_createHelper:function(h){return function(m,_){return new h.init(_).finalize(m)}},_createHmacHelper:function(h){return function(m,_){return new v.HMAC.init(h,_).finalize(m)}}});var v=c.algo={};return c}(Math);return t})}(Je)),Je.exports}var Ye={exports:{}},$t;function Hi(){return $t||($t=1,function(e,a){(function(t,r){e.exports=r(Pe())})(b,function(t){return function(){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,s=r.algo,c=[],l=s.SHA1=o.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,f){for(var d=this._hash.words,p=d[0],g=d[1],w=d[2],y=d[3],v=d[4],h=0;h<80;h++){if(h<16)c[h]=u[f+h]|0;else{var m=c[h-3]^c[h-8]^c[h-14]^c[h-16];c[h]=m<<1|m>>>31}var _=(p<<5|p>>>27)+v+c[h];h<20?_+=(g&w|~g&y)+1518500249:h<40?_+=(g^w^y)+1859775393:h<60?_+=(g&w|g&y|w&y)-1894007588:_+=(g^w^y)-899497514,v=y,y=w,w=g<<30|g>>>2,g=p,p=_}d[0]=d[0]+p|0,d[1]=d[1]+g|0,d[2]=d[2]+w|0,d[3]=d[3]+y|0,d[4]=d[4]+v|0},_doFinalize:function(){var u=this._data,f=u.words,d=this._nDataBytes*8,p=u.sigBytes*8;return f[p>>>5]|=128<<24-p%32,f[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),f[(p+64>>>9<<4)+15]=d,u.sigBytes=f.length*4,this._process(),this._hash},clone:function(){var u=o.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=o._createHelper(l),r.HmacSHA1=o._createHmacHelper(l)}(),t.SHA1})}(Ye)),Ye.exports}var Ze={exports:{}},Ft;function Ni(){return Ft||(Ft=1,function(e,a){(function(t,r){e.exports=r(Pe())})(b,function(t){(function(){var r=t,n=r.lib,i=n.Base,o=r.enc,s=o.Utf8,c=r.algo;c.HMAC=i.extend({init:function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=s.parse(u));var f=l.blockSize,d=f*4;u.sigBytes>d&&(u=l.finalize(u)),u.clamp();for(var p=this._oKey=u.clone(),g=this._iKey=u.clone(),w=p.words,y=g.words,v=0;v<f;v++)w[v]^=1549556828,y[v]^=909522486;p.sigBytes=g.sigBytes=d,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var u=this._hasher,f=u.finalize(l);u.reset();var d=u.finalize(this._oKey.clone().concat(f));return d}})})()})}(Ze)),Ze.exports}(function(e,a){(function(t,r,n){e.exports=r(Pe(),Hi(),Ni())})(b,function(t){return t.HmacSHA1})})(hr);var Bi=hr.exports,pr={exports:{}};(function(e,a){(function(t,r){e.exports=r(Pe())})(b,function(t){return function(){var r=t,n=r.lib,i=n.WordArray,o=r.enc;o.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,f=this._map;c.clamp();for(var d=[],p=0;p<u;p+=3)for(var g=l[p>>>2]>>>24-p%4*8&255,w=l[p+1>>>2]>>>24-(p+1)%4*8&255,y=l[p+2>>>2]>>>24-(p+2)%4*8&255,v=g<<16|w<<8|y,h=0;h<4&&p+h*.75<u;h++)d.push(f.charAt(v>>>6*(3-h)&63));var m=f.charAt(64);if(m)for(;d.length%4;)d.push(m);return d.join("")},parse:function(c){var l=c.length,u=this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var d=0;d<u.length;d++)f[u.charCodeAt(d)]=d}var p=u.charAt(64);if(p){var g=c.indexOf(p);g!==-1&&(l=g)}return s(c,l,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function s(c,l,u){for(var f=[],d=0,p=0;p<l;p++)if(p%4){var g=u[c.charCodeAt(p-1)]<<p%4*2,w=u[c.charCodeAt(p)]>>>6-p%4*2,y=g|w;f[d>>>2]|=y<<24-d%4*8,d++}return i.create(f,d)}}(),t.enc.Base64})})(pr);var zi=pr.exports,Le={};Object.defineProperty(Le,"__esModule",{value:!0});Le.fixedEncodeURIComponent=void 0;function Gi(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}Le.fixedEncodeURIComponent=Gi;(function(e){var a=b&&b.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(e,"__esModule",{value:!0}),e.TwitterStrategy=e.TwitterStrategyDefaultName=void 0;const t=re,r=a(er),n=ge,i=Li,o=a(Bi),s=a(zi),c=Le;let l=(0,r.default)("TwitterStrategy");const u="https://api.twitter.com/oauth/request_token",f="https://api.twitter.com/oauth/authorize",d="https://api.twitter.com/oauth/access_token",p="https://api.twitter.com/1.1/account/verify_credentials.json";e.TwitterStrategyDefaultName="twitter";class g extends n.Strategy{constructor(y,v){super(v),this.name=e.TwitterStrategyDefaultName,this.clientID=y.clientID,this.clientSecret=y.clientSecret,this.callbackURL=y.callbackURL,this.includeEmail=y.includeEmail||!1}async authenticate(y,v,h){var m;l("Request URL",y.url);let _=new URL(y.url),S=await v.getSession(y.headers.get("Cookie")),C=(m=S.get(h.sessionKey))!==null&&m!==void 0?m:null;if(C)return l("User is authenticated"),this.success(C,y,v,h);let R=this.getCallbackURL(_);if(l("Callback URL",R),_.pathname!==R.pathname){l("Requesting request token");const{requestToken:ie,callbackConfirmed:Me}=await this.fetchRequestToken(R);throw Me?(0,t.redirect)(g.getAuthorizationURL(ie).toString(),{headers:{"Set-Cookie":await v.commitSession(S)}}):(0,t.json)({message:"Callback not confirmed"},{status:401})}if(_.searchParams.get("denied"))return await this.failure("Please authorize the app",y,v,h);const x=_.searchParams.get("oauth_token");if(!x)throw(0,t.json)({message:"Missing oauth token from auth response."},{status:400});const j=_.searchParams.get("oauth_verifier");if(!j)throw(0,t.json)({message:"Missing oauth verifier from auth response."},{status:400});let X=new URLSearchParams;X.set("oauth_token",x),X.set("oauth_verifier",j);let{accessToken:J,accessTokenSecret:pt}=await this.fetchAccessToken(X),Cr=await this.userProfile(J,pt,this.includeEmail);try{C=await this.verify({accessToken:J,accessTokenSecret:pt,profile:Cr,context:h.context})}catch(ie){l("Failed to verify user",ie);let Me=ie.message;return await this.failure(Me,y,v,h)}return l("User authenticated"),await this.success(C,y,v,h)}getCallbackURL(y){return this.callbackURL.startsWith("http:")||this.callbackURL.startsWith("https:")?new URL(this.callbackURL):this.callbackURL.startsWith("/")?new URL(this.callbackURL,y):new URL(`${y.protocol}//${this.callbackURL}`)}static generateNonce(){return(0,i.v4)()}static generateTimestamp(){return`${Math.floor(Date.now()/1e3)}`}async fetchRequestToken(y){const v=this.signRequest({oauth_callback:y.toString()},"GET",u),h=new URL(u);h.search=new URLSearchParams(v).toString();let m=await fetch(h.toString(),{method:"GET"});if(!m.ok){let C=await m.text();throw new Response(C,{status:401})}const _=await m.text(),S={};for(const C of _.split("&")){const[R,T]=C.split("=");S[R]=T}return{requestToken:S.oauth_token,requestTokenSecret:S.oauth_token_secret,callbackConfirmed:S.oauth_callback_confirmed==="true"}}signRequest(y,v,h,m){const _={...y,oauth_consumer_key:this.clientID,oauth_nonce:g.generateNonce(),oauth_timestamp:g.generateTimestamp(),oauth_version:"1.0",oauth_signature_method:"HMAC-SHA1"},S=Object.entries(_).sort(([x],[j])=>x.localeCompare(j)).map(([x,j])=>`${(0,c.fixedEncodeURIComponent)(x)}=${(0,c.fixedEncodeURIComponent)(j)}`).join("&"),C=`${v}&${(0,c.fixedEncodeURIComponent)(h)}&${(0,c.fixedEncodeURIComponent)(S)}`,R=`${this.clientSecret}&${m||""}`,T=s.default.stringify((0,o.default)(C,R));return{..._,oauth_signature:T,oauth_signature_method:"HMAC-SHA1"}}static getAuthorizationURL(y){let v=new URLSearchParams;v.set("oauth_token",y);let h=new URL(f);return h.search=v.toString(),h}async fetchAccessToken(y){y.set("oauth_consumer_key",this.clientID);let v=await fetch(d,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:y});if(!v.ok){let h=await v.text();throw l("error! "+h),new Response(h,{status:401})}return await this.getAccessToken(v.clone())}async getAccessToken(y){const v=await y.text(),h={};for(const S of v.split("&")){const[C,R]=S.split("=");h[C]=R}const m=h.oauth_token,_=h.oauth_token_secret;return{accessToken:m,accessTokenSecret:_}}async userProfile(y,v,h){const m=this.signRequest({oauth_token:y,include_email:h?"true":"false"},"GET",p,v),_=new URL(p);return _.search=new URLSearchParams(m).toString(),await(await fetch(_.toString())).json()}}e.TwitterStrategy=g})(ht);var gr={};(function(e){var a=b&&b.__createBinding||(Object.create?function(r,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(r,o,s)}:function(r,n,i,o){o===void 0&&(o=i),r[o]=n[i]}),t=b&&b.__exportStar||function(r,n){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&a(n,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(ct,e)})(gr);var mr={};(function(e){var a=b&&b.__createBinding||(Object.create?function(r,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(r,o,s)}:function(r,n,i,o){o===void 0&&(o=i),r[o]=n[i]}),t=b&&b.__exportStar||function(r,n){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&a(n,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(ft,e)})(mr);var vr={};(function(e){var a=b&&b.__createBinding||(Object.create?function(r,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(r,o,s)}:function(r,n,i,o){o===void 0&&(o=i),r[o]=n[i]}),t=b&&b.__exportStar||function(r,n){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&a(n,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(lt,e)})(vr);var yr={},_r={},wr={};Object.defineProperty(wr,"__esModule",{value:!0});(function(e){var a=b&&b.__createBinding||(Object.create?function(i,o,s,c){c===void 0&&(c=s);var l=Object.getOwnPropertyDescriptor(o,s);(!l||("get"in l?!o.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(i,c,l)}:function(i,o,s,c){c===void 0&&(c=s),i[c]=o[s]}),t=b&&b.__exportStar||function(i,o){for(var s in i)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&a(o,i,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.FacebookStrategy=e.FacebookStrategyScopeSeperator=e.FacebookStrategyDefaultScopes=e.FacebookStrategyName=e.baseProfileFields=void 0;const r=K;t(wr,e),e.baseProfileFields=["id","email","name","first_name","middle_name","last_name","picture"],e.FacebookStrategyName="facebook",e.FacebookStrategyDefaultScopes=["public_profile","email"],e.FacebookStrategyScopeSeperator=",";class n extends r.OAuth2Strategy{constructor({clientID:o,clientSecret:s,callbackURL:c,scope:l,extraProfileFields:u},f){super({clientID:o,clientSecret:s,callbackURL:c,authorizationURL:"https://facebook.com/v14.0/dialog/oauth",tokenURL:"https://graph.facebook.com/v14.0/oauth/access_token"},f),this.name=e.FacebookStrategyName,this.userInfoURL="https://graph.facebook.com/me",this.scope=this.getScope(l),this.profileFields=[...new Set([...e.baseProfileFields,...u||[]])]}getScope(o){if(o){if(typeof o=="string")return o.split(e.FacebookStrategyScopeSeperator)}else return e.FacebookStrategyDefaultScopes;return o}authorizationParams(){return new URLSearchParams({scope:this.scope.join(e.FacebookStrategyScopeSeperator)})}async userProfile(o){const s=`?fields=${this.profileFields.join(",")}`,c=`${this.userInfoURL}${s}`,u=await(await fetch(c,{headers:{Authorization:`Bearer ${o}`}})).json();return{provider:"facebook",id:u.id,displayName:u.name,name:{familyName:u.last_name,givenName:u.first_name},emails:[{value:u.email}],photos:[{value:u.picture.data.url}],_json:u}}}e.FacebookStrategy=n})(_r);(function(e){var a=b&&b.__createBinding||(Object.create?function(r,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(r,o,s)}:function(r,n,i,o){o===void 0&&(o=i),r[o]=n[i]}),t=b&&b.__exportStar||function(r,n){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&a(n,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(_r,e)})(yr);var br={};(function(e){var a=b&&b.__createBinding||(Object.create?function(r,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(r,o,s)}:function(r,n,i,o){o===void 0&&(o=i),r[o]=n[i]}),t=b&&b.__exportStar||function(r,n){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&a(n,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(dt,e)})(br);var Sr={};(function(e){var a=b&&b.__createBinding||(Object.create?function(r,n,i,o){o===void 0&&(o=i);var s=Object.getOwnPropertyDescriptor(n,i);(!s||("get"in s?!n.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(r,o,s)}:function(r,n,i,o){o===void 0&&(o=i),r[o]=n[i]}),t=b&&b.__exportStar||function(r,n){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(n,i)&&a(n,r,i)};Object.defineProperty(e,"__esModule",{value:!0}),t(ht,e)})(Sr);(function(e){var a=b&&b.__createBinding||(Object.create?function(c,l,u,f){f===void 0&&(f=u);var d=Object.getOwnPropertyDescriptor(l,u);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(c,f,d)}:function(c,l,u,f){f===void 0&&(f=u),c[f]=l[u]}),t=b&&b.__exportStar||function(c,l){for(var u in c)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&a(l,c,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.SocialsProvider=void 0;const r=ct,n=lt,i=ft,o=dt,s=ht;t(gr,e),t(mr,e),t(vr,e),t(yr,e),t(br,e),t(Sr,e),e.SocialsProvider={DISCORD:r.DiscordStrategyDefaultName,FACEBOOK:"facebook",GITHUB:n.GitHubStrategyDefaultName,GOOGLE:i.GoogleStrategyDefaultName,MICROSOFT:o.MicrosoftStrategyDefaultName,TWITTER:s.TwitterStrategyDefaultName}})(Qt);function Ki(e){return Xr({tag:"svg",attr:{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"path",attr:{fill:"#FFC107",d:`M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12\r
	c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24\r
	c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z`},child:[]},{tag:"path",attr:{fill:"#FF3D00",d:`M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657\r
	C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z`},child:[]},{tag:"path",attr:{fill:"#4CAF50",d:`M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36\r
	c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z`},child:[]},{tag:"path",attr:{fill:"#1976D2",d:`M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571\r
	c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z`},child:[]}]})(e)}const Vi=({action:e})=>{const t=Wr().formAction==="/auth/google";return M.jsxs(Yr.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:.3},className:"flex flex-col gap-3 mt-3",children:[M.jsx("p",{className:"text-center text-gray-500 font-medium",children:"OR"}),M.jsx(vt,{method:"post",action:`/auth/${Qt.SocialsProvider.GOOGLE}`,children:M.jsxs("button",{disabled:t,className:" w-full border border-gray-300 rounded-full p-2 flex justify-center items-center gap-3 hover:bg-gray-100 tap",children:[M.jsx(Ki,{className:"text-2xl"}),M.jsx("p",{className:"font-semibold",children:t?"Loading...":"Continue with Google"})]})}),M.jsxs(vt,{children:[M.jsxs("button",{className:" w-full border border-gray-300 rounded-full p-2 flex justify-center items-center gap-3 hover:bg-gray-100 tap",children:[M.jsx(Jr,{className:"text-2xl"}),M.jsx("p",{className:"font-semibold",children:"Continue with Apple"})]})," "]}),M.jsxs("p",{className:"text-center text-sm text-gray-500 font-medium",children:[e==="signup"?"Already have an account?":"Don't have an account?",M.jsx(qr,{className:"text-blue-600 text-sm tap",to:`${e==="signup"?"/login":"/register"}`,children:e==="signup"?" Log in":" Sign up"})]})]})},to=Vi;export{to as C,eo as E,Qi as P};
