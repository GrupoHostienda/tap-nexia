import{o as a,f as n,b as o,y as W,z as X,A as c,B as ee,a as e,u as l,Z as le,w as d,g as h,F as D,s as N,d as U,t as te,O as se,T as B,n as q}from"./app-Njb5sTLW.js";import{_ as oe}from"./AuthenticatedLayout-BnuYzkhn.js";import{e as ie,f as ae,g as ne,h as S,i as L,j as re}from"./dialog.esm-C75ArCIk.js";import{s as u}from"./button.esm-BsInk-ks.js";import{s as P}from"./inputtext.esm-BHfeCFkf.js";import"./ApplicationLogo-B_oVA1mH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./checkbox.esm-BmdDkljA.js";const de={class:"flex justify-center rounded-full border-2 border-slate-300 bg-slate-200 p-4 hover:bg-slate-100"},ue=o("i",{class:"pi pi-plus"},null,-1),ce=[ue],I={__name:"ButtonAdd",props:{value:{type:String,require:!1}},setup(k){return(f,C)=>(a(),n("div",de,ce))}},pe={class:"flex justify-center rounded-full border-2 border-[#C58B8B] bg-[#F0DFDF] p-4 hover:bg-white"},me=o("i",{class:"pi pi-trash",style:{color:"#C58B8B"}},null,-1),ve=[me],_e={__name:"ButtonRemove",props:{value:{type:String,require:!1}},setup(k){return(f,C)=>(a(),n("div",pe,ve))}},fe={class:"py-12"},ye={class:"mx-auto sm:px-6 lg:px-8"},he={class:"bg-white p-5 overflow-hidden shadow-sm sm:rounded-lg"},ke=o("h2",{class:"text-2xl font-bold mb-4"},"Link schema",-1),be={class:"card"},ge={class:"flex flex-wrap gap-2 align-items-center justify-between"},Ce=o("h4",{class:"m-0"},"Link schemas",-1),xe={class:"p-input-icon-left"},we=o("i",{class:"pi pi-search"},null,-1),Se={key:0,class:"field mb-3"},$e=o("label",{for:"name"},"Type",-1),Ve={key:0,class:"p-error"},De={class:"field mb-3 grid gap-4"},Be=o("label",{for:"name"},"Properties",-1),Le={class:"flex flex-row gap-4"},Pe={key:0,class:"p-error"},Te={key:1},Ne=o("label",{for:"name"},"options",-1),Ue={class:"flex flex-row flex-wrap gap-4"},qe={class:"w-1/2"},Ie={class:"confirmation-content"},Ae=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Fe={key:0},Ee={class:"confirmation-content"},Me=o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Oe={key:0},Je=W({__name:"index",props:{linkTypes:{type:Array,required:!0},linkTypesSchema:{type:Array,required:!0},linkSchemas:{type:Object,required:!0},linkSchemasGroupBy:{type:Object,required:!0}},setup(k){const f=X(),C=c(),_=c(!1),$=c(!1),b=c(!1),g=c(!1),r=c({link_type_id:"",property:"",options:[]}),p=c([]),y=c(),V=c({global:{value:null,matchMode:ee.CONTAINS}}),m=c(!1),A=()=>{T(),m.value=!1,_.value=!0},F=()=>{_.value=!1,m.value=!1},E=i=>{se.visit(`/link-schemas/${i}`)},M=()=>{p.value.push({property:"",options:[]})},O=i=>{p.value[i].options.push("")},j=i=>{p.value.splice(i,1)},R=()=>{if(m.value=!0,!r.value.link_type_id&&!p.value.length)return;const i=B({link_type_id:r.value.link_type_id,schemas:p.value});if($.value){z(i);return}i.post("/link-schemas",{onSuccess:()=>{f.add({severity:"success",summary:"Successful",detail:"Link schema Created",life:3e3}),_.value=!1},onError:t=>{console.log(t)}})},z=i=>{m.value=!0,i.post("/link-schemas/update",{onSuccess:()=>{f.add({severity:"success",summary:"Successful",detail:"Link schema Updated",life:3e3}),_.value=!1},onError:t=>{console.log(t)}})},G=(i,t)=>{_.value=!0,$.value=!0,r.value.link_type_id=i.id,p.value=[...t[i.name]]},Y=i=>{r.value.link_type_id=i.id,b.value=!0},K=()=>{b.value=!1,B({}).delete(`/link-schemas/${r.value.link_type_id}`,{onSuccess:()=>{f.add({severity:"success",summary:"Successful",detail:"Link schema Deleted",life:3e3})},onError:t=>{console.log(t)},onFinish:()=>{T()}})},Z=()=>{C.value.exportCSV()},H=()=>{g.value=!0},J=()=>{g.value=!1;const i=B({items:y.value});console.log(i),i.delete("/link-schemas/deleteSelected",{onSuccess:()=>{y.value=null,f.add({severity:"success",summary:"Successful",detail:"Link Types  Deleted",life:3e3})},onError:t=>{console.log(t)}})},T=()=>{r.value={link_type_id:"",property:"",options:[]}};return(i,t)=>(a(),n(D,null,[e(l(le),{title:"Dashboard"}),e(oe,null,{default:d(()=>[e(l(ie)),o("div",fe,[o("div",ye,[o("div",he,[ke,o("div",null,[o("div",be,[e(l(ae),{class:"mb-4"},{start:d(()=>[e(l(u),{label:"Nuevo",icon:"pi pi-plus",severity:"success",class:"mr-2",onClick:A}),e(l(u),{label:"Borrar",icon:"pi pi-trash",severity:"danger",onClick:H,disabled:!y.value||!y.value.length},null,8,["disabled"])]),end:d(()=>[e(l(u),{label:"Exportar",icon:"pi pi-upload",severity:"help",onClick:Z})]),_:1}),e(l(ne),{ref_key:"dt",ref:C,value:k.linkTypesSchema,selection:y.value,"onUpdate:selection":t[1]||(t[1]=s=>y.value=s),dataKey:"id",paginator:!0,rows:10,filters:V.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrando del {first} al {last} de {totalRecords} itemos"},{header:d(()=>[o("div",ge,[Ce,o("span",xe,[we,e(l(P),{modelValue:V.value.global.value,"onUpdate:modelValue":t[0]||(t[0]=s=>V.value.global.value=s),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:d(()=>[e(l(S),{selectionMode:"multiple",style:{width:"3rem"}}),e(l(S),{field:"id",header:"ID",sortable:""}),e(l(S),{field:"name",header:"Type"}),e(l(S),{exportable:!1,style:{"min-width":"8rem"}},{body:d(s=>[e(l(u),{icon:"pi pi-eye",outlined:"",rounded:"",severity:"help",class:"mr-2",onClick:v=>E(s.data.id)},null,8,["onClick"]),e(l(u),{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:v=>G(s.data,k.linkSchemasGroupBy)},null,8,["onClick"]),e(l(u),{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:v=>Y(s.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"])]),e(l(L),{visible:_.value,"onUpdate:visible":t[3]||(t[3]=s=>_.value=s),style:{width:"850px"},header:"Schema Details",modal:!0,class:"p-fluid"},{footer:d(()=>[e(l(u),{label:"Cancel",icon:"pi pi-times",text:"",onClick:F}),e(l(u),{label:"Save",icon:"pi pi-check",text:"",onClick:R})]),default:d(()=>[$.value?h("",!0):(a(),n("div",Se,[$e,e(l(re),{modelValue:r.value.link_type_id,"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.link_type_id=s),options:k.linkTypes,optionLabel:"name",optionValue:"id",placeholder:"Select a type",class:"w-full md:w-14rem"},null,8,["modelValue","options"]),m.value&&!r.value.link_type_id?(a(),n("small",Ve,"type is required.")):h("",!0)])),o("div",De,[Be,(a(!0),n(D,null,N(p.value,(s,v)=>(a(),n("div",{key:v},[o("div",Le,[e(l(P),{id:"property",modelValue:p.value[v].property,"onUpdate:modelValue":x=>p.value[v].property=x,modelModifiers:{trim:!0},required:"true",class:q({"p-invalid":m.value&&!s.property})},null,8,["modelValue","onUpdate:modelValue","class"]),e(I,{onClick:x=>O(v)},null,8,["onClick"]),e(_e,{onClick:x=>j(v)},null,8,["onClick"])]),m.value&&!s.property?(a(),n("small",Pe,"Property is required.")):h("",!0),s.options.length!=0?(a(),n("div",Te,[Ne,o("div",Ue,[(a(!0),n(D,null,N(s.options,(x,w)=>(a(),n("div",{key:w},[e(l(P),{id:"option",modelValue:s.options[w],"onUpdate:modelValue":Q=>s.options[w]=Q,modelModifiers:{trim:!0},required:"true",class:q({"p-invalid":m.value&&!s.options[w]})},null,8,["modelValue","onUpdate:modelValue","class"])]))),128))])])):h("",!0)]))),128))]),o("div",qe,[e(I,{onClick:M})])]),_:1},8,["visible"]),e(l(L),{visible:b.value,"onUpdate:visible":t[5]||(t[5]=s=>b.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[e(l(u),{label:"No",icon:"pi pi-times",text:"",onClick:t[4]||(t[4]=s=>b.value=!1)}),e(l(u),{label:"Yes",icon:"pi pi-check",text:"",onClick:K})]),default:d(()=>[o("div",Ie,[Ae,r.value?(a(),n("span",Fe,[U("Are you sure you want to delete "),o("b",null,te(r.value.link_type_id),1),U("?")])):h("",!0)])]),_:1},8,["visible"]),e(l(L),{visible:g.value,"onUpdate:visible":t[7]||(t[7]=s=>g.value=s),style:{width:"450px"},header:"Confirm",modal:!0},{footer:d(()=>[e(l(u),{label:"No",icon:"pi pi-times",text:"",onClick:t[6]||(t[6]=s=>g.value=!1)}),e(l(u),{label:"Yes",icon:"pi pi-check",text:"",onClick:J})]),default:d(()=>[o("div",Ee,[Me,r.value?(a(),n("span",Oe,"Are you sure you want to delete the selected link schema?")):h("",!0)])]),_:1},8,["visible"])])])])])]),_:1})],64))}});export{Je as default};
