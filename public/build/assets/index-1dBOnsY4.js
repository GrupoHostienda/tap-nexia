import{o as u,f as p,b as l,l as Y,p as K,q as c,s as Z,a as e,u as s,Z as G,w as r,g as C,F as P,v as H,d as L,t as J,O as Q,T as w,n as W}from"./app-CbG_GS4Z.js";import{_ as X}from"./AuthenticatedLayout-Bvk2D8pg.js";import{s as ee,a as se,b as te,c as k,d as $,e as le}from"./dialog.esm-BXjXZ5_L.js";import{s as n}from"./button.esm-RneWkM_M.js";import{s as I}from"./inputtext.esm-DHAKrWh8.js";import"./ApplicationLogo-BA4xlCG4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./checkbox.esm-DPxvCfK-.js";const oe={class:"flex justify-center rounded-full border-2 border-slate-300 bg-slate-200 p-4 hover:bg-slate-100"},ie=l("i",{class:"pi pi-plus"},null,-1),ae=[ie],re={__name:"ButtonAdd",props:{value:{type:String,require:!1}},setup(b){return(f,g)=>(u(),p("div",oe,ae))}},ne={class:"flex justify-center rounded-full border-2 border-[#C58B8B] bg-[#F0DFDF] p-4 hover:bg-white"},de=l("i",{class:"pi pi-trash",style:{color:"#C58B8B"}},null,-1),ce=[de],ue={__name:"ButtonRemove",props:{value:{type:String,require:!1}},setup(b){return(f,g)=>(u(),p("div",ne,ce))}},pe={class:"py-12"},me={class:"mx-auto sm:px-6 lg:px-8"},ve={class:"bg-white p-5 overflow-hidden shadow-sm sm:rounded-lg"},fe=l("h2",{class:"text-2xl font-bold mb-4"},"Link schema",-1),_e={class:"card"},he={class:"flex flex-wrap gap-2 align-items-center justify-between"},ye=l("h4",{class:"m-0"},"Link schemas",-1),ke={class:"p-input-icon-left"},be=l("i",{class:"pi pi-search"},null,-1),ge={class:"field mb-3"},Ce=l("label",{for:"name"},"Type",-1),xe={key:0,class:"p-error"},we={class:"field mb-3 grid gap-4"},$e=l("label",{for:"name"},"Properties",-1),Se={class:"flex flex-row gap-4"},Ve={key:0,class:"p-error"},De={class:"w-1/2"},Pe={class:"confirmation-content"},Le=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Ie={key:0},Be={class:"confirmation-content"},Ne=l("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),Te={key:0},je=Y({__name:"index",props:{linkTypes:{type:Array,required:!0},linkSchemas:{type:Array,required:!0}},setup(b){const f=K(),g=c(),m=c(!1),S=c(!1),h=c(!1),y=c(!1),o=c({link_type_id:"",properties:[]}),_=c(),x=c({global:{value:null,matchMode:Z.CONTAINS}}),v=c(!1),B=()=>{V(),v.value=!1,m.value=!0},N=()=>{m.value=!1,v.value=!1},T=a=>{Q.visit(`/link-schemas/${a}`)},U=()=>{o.value.properties.push("")},q=a=>{o.value.properties.splice(a,1)},F=()=>{if(v.value=!0,!o.value.properties&&!o.value.link_type_id)return;const a=w({...o.value});if(S.value){E(a);return}a.post("/link-schemas",{onSuccess:()=>{f.add({severity:"success",summary:"Successful",detail:"Link schema Created",life:3e3}),m.value=!1},onError:t=>{console.log(t)}})},E=a=>{v.value=!0,a.post("/link-schemas/update",{onSuccess:()=>{f.add({severity:"success",summary:"Successful",detail:"Link schema Updated",life:3e3}),m.value=!1},onError:t=>{console.log(t)}})},A=a=>{m.value=!0,S.value=!0,o.value={...a}},M=a=>{o.value=a,h.value=!0},R=()=>{h.value=!1,w({}).delete(`/link-schemas/${o.value.id}`,{onSuccess:()=>{f.add({severity:"success",summary:"Successful",detail:"Link schema Deleted",life:3e3})},onError:t=>{console.log(t)},onFinish:()=>{V()}})},O=()=>{g.value.exportCSV()},j=()=>{y.value=!0},z=()=>{y.value=!1;const a=w({items:_.value});console.log(a),a.delete("/link-schemas/deleteSelected",{onSuccess:()=>{_.value=null,f.add({severity:"success",summary:"Successful",detail:"Link Types  Deleted",life:3e3})},onError:t=>{console.log(t)}})},V=()=>{o.value={link_type_id:"",properties:[]}};return(a,t)=>(u(),p(P,null,[e(s(G),{title:"Dashboard"}),e(X,null,{default:r(()=>[e(s(ee)),l("div",pe,[l("div",me,[l("div",ve,[fe,l("div",null,[l("div",_e,[e(s(se),{class:"mb-4"},{start:r(()=>[e(s(n),{label:"Nuevo",icon:"pi pi-plus",severity:"success",class:"mr-2",onClick:B}),e(s(n),{label:"Borrar",icon:"pi pi-trash",severity:"danger",onClick:j,disabled:!_.value||!_.value.length},null,8,["disabled"])]),end:r(()=>[e(s(n),{label:"Exportar",icon:"pi pi-upload",severity:"help",onClick:O})]),_:1}),e(s(te),{ref_key:"dt",ref:g,value:b.linkSchemas,selection:_.value,"onUpdate:selection":t[1]||(t[1]=i=>_.value=i),dataKey:"id",paginator:!0,rows:10,filters:x.value,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Mostrando del {first} al {last} de {totalRecords} itemos"},{header:r(()=>[l("div",he,[ye,l("span",ke,[be,e(s(I),{modelValue:x.value.global.value,"onUpdate:modelValue":t[0]||(t[0]=i=>x.value.global.value=i),placeholder:"Buscar..."},null,8,["modelValue"])])])]),default:r(()=>[e(s(k),{selectionMode:"multiple",style:{width:"3rem"}}),e(s(k),{field:"id",header:"ID",sortable:""}),e(s(k),{field:"type.name",header:"Type"}),e(s(k),{field:"properties",header:"Properties"}),e(s(k),{exportable:!1,style:{"min-width":"8rem"}},{body:r(i=>[e(s(n),{icon:"pi pi-eye",outlined:"",rounded:"",severity:"help",class:"mr-2",onClick:d=>T(i.data.id)},null,8,["onClick"]),e(s(n),{icon:"pi pi-pencil",outlined:"",rounded:"",class:"mr-2",onClick:d=>A(i.data)},null,8,["onClick"]),e(s(n),{icon:"pi pi-trash",outlined:"",rounded:"",severity:"danger",onClick:d=>M(i.data)},null,8,["onClick"])]),_:1})]),_:1},8,["value","selection","filters"])]),e(s($),{visible:m.value,"onUpdate:visible":t[3]||(t[3]=i=>m.value=i),style:{width:"850px"},header:"Schema Details",modal:!0,class:"p-fluid"},{footer:r(()=>[e(s(n),{label:"Cancel",icon:"pi pi-times",text:"",onClick:N}),e(s(n),{label:"Save",icon:"pi pi-check",text:"",onClick:F})]),default:r(()=>[l("div",ge,[Ce,e(s(le),{modelValue:o.value.link_type_id,"onUpdate:modelValue":t[2]||(t[2]=i=>o.value.link_type_id=i),options:b.linkTypes,optionLabel:"name",optionValue:"id",placeholder:"Select a type",class:"w-full md:w-14rem"},null,8,["modelValue","options"]),v.value&&!o.value.link_type_id?(u(),p("small",xe,"type is required.")):C("",!0)]),l("div",we,[$e,(u(!0),p(P,null,H(o.value.properties,(i,d)=>(u(),p("div",{key:d},[l("div",Se,[e(s(I),{id:"property",modelValue:o.value.properties[d],"onUpdate:modelValue":D=>o.value.properties[d]=D,modelModifiers:{trim:!0},required:"true",class:W({"p-invalid":v.value&&!o.value.properties[d]})},null,8,["modelValue","onUpdate:modelValue","class"]),e(ue,{onClick:D=>q(d)},null,8,["onClick"])]),v.value&&!o.value.properties[d]?(u(),p("small",Ve,"Property is required.")):C("",!0)]))),128))]),l("div",De,[e(re,{onClick:U})])]),_:1},8,["visible"]),e(s($),{visible:h.value,"onUpdate:visible":t[5]||(t[5]=i=>h.value=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[e(s(n),{label:"No",icon:"pi pi-times",text:"",onClick:t[4]||(t[4]=i=>h.value=!1)}),e(s(n),{label:"Yes",icon:"pi pi-check",text:"",onClick:R})]),default:r(()=>[l("div",Pe,[Le,o.value?(u(),p("span",Ie,[L("Are you sure you want to delete "),l("b",null,J(o.value.name),1),L("?")])):C("",!0)])]),_:1},8,["visible"]),e(s($),{visible:y.value,"onUpdate:visible":t[7]||(t[7]=i=>y.value=i),style:{width:"450px"},header:"Confirm",modal:!0},{footer:r(()=>[e(s(n),{label:"No",icon:"pi pi-times",text:"",onClick:t[6]||(t[6]=i=>y.value=!1)}),e(s(n),{label:"Yes",icon:"pi pi-check",text:"",onClick:z})]),default:r(()=>[l("div",Be,[Ne,o.value?(u(),p("span",Te,"Are you sure you want to delete the selected link schema?")):C("",!0)])]),_:1},8,["visible"])])])])])]),_:1})],64))}});export{je as default};
